{"version":3,"sources":["../node_modules/react-cool-inview/dist/index.esm.js","../node_modules/lodash/sum.js","../node_modules/lodash/_baseSum.js","../node_modules/browser-file-storage/dist/browser-file-storage.js","vanilla/components/alignment.ts","vanilla/components/utils.ts","vanilla/components/counter.ts","vanilla/components/eventStore.ts","vanilla/components/vector1d.ts","vanilla/components/dragHandler.ts","vanilla/components/limit.ts","vanilla/components/scrollBody.ts","vanilla/components/scrollBounds.ts","vanilla/components/scrollContain.ts","vanilla/components/scrollLooper.ts","vanilla/components/scrollProgress.ts","vanilla/components/scrollSnap.ts","vanilla/components/scrollTarget.ts","vanilla/components/slideLooper.ts","vanilla/components/slideFocus.ts","vanilla/components/translate.ts","vanilla/components/engine.ts","vanilla/components/pxToPercent.ts","vanilla/components/direction.ts","vanilla/components/axis.ts","vanilla/components/slideSizes.ts","vanilla/components/scrollLimit.ts","vanilla/components/animation.ts","vanilla/components/scrollTo.ts","vanilla/components/slidesInView.ts","vanilla/components/dragTracker.ts","vanilla/components/options.ts","vanilla/index.ts","vanilla/components/eventEmitter.ts","vanilla/components/optionsPseudo.ts","react/index.ts","react/utils.ts"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","useLatest","val","ref","useRef","current","useInView","_temp","_ref","root","rootMargin","_ref$threshold","threshold","trackVisibility","delay","unobserveOnEnter","onChange","onEnter","onLeave","_useState","useState","inView","scrollDirection","state","setState","prevInViewRef","prevPosRef","observerRef","warnedRef","onChangeRef","onEnterRef","onLeaveRef","unobserve","useCallback","disconnect","observe","element","updatePosition","_ref$current$getBound","getBoundingClientRect","x","y","useEffect","window","IntersectionObserver","_ref2","entry","intersectionRatio","isIntersecting","_entry$boundingClient","boundingClientRect","isVisible","min","Array","isArray","Math","undefined","horizontal","vertical","e","console","warn","error","JSON","stringify","baseSum","require","identity","module","exports","array","iteratee","result","index","factory","modules","installedModules","__webpack_require__","moduleId","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","bind","n","object","property","p","s","_typeof","iterator","obj","constructor","_createClass","defineProperties","props","descriptor","configurable","writable","Constructor","protoProps","staticProps","_messages2","_interopRequireDefault","_mimetypes2","_logger2","_file2","default","SELF","BrowserFileStorage","instance","TypeError","_classCallCheck","_init","_idb","_db","_namespace","_idb_name","_idb_version","indexedDB","mozIndexedDB","webkitIndexedDB","msIndexedDB","IDBTransaction","webkitIDBTransaction","msIDBTransaction","READ_WRITE","IDBKeyRange","webkitIDBKeyRange","msIDBKeyRange","level","logLevel","namespace","Promise","resolve","reject","log","LEVEL_ERROR","IDB_ALREADY_INIT","alreadyInit","supported","IDB_NOT_SUPPORTED","dbName","_opendb","err","successObj","IDB_COULD_NOT_OPEN","dbError","LEVEL_INFO","IDB_OPEN_SUCCESS","initial","navigator","storage","persist","then","persistent","IDB_PERSIST_PASS","canPersist","LEVEL_WARN","IDB_PERSIST_FAIL","IDB_PERSIST_NONE","IDB_NOT_INIT","method","message","init","filename","contents","mimetype","metadata","IDB_BAD_FILENAME","invalidFilename","fileToSave","_createFileToSave","mimeType","IDB_WRONG_CONTENT","invalidContents","addRequest","transaction","objectStore","put","_toIDB","onsuccess","event","IDB_SAVE_SUCCESS","file","onerror","IDB_SAVE_FAIL","request","fileToLoad","IDB_LOAD_SUCCESS","IDB_LOAD_FIND_FAIL","notFound","IDB_LOAD_FAIL","getAll","getRequest","files","push","IDB_LOAD_ALL_SUCCESS","IDB_LOAD_ALL_FAIL","cursorRequest","openCursor","cursor","continue","getAllKeys","IDB_LOAD_ALL_KEYS_SUCCESS","keys","IDB_LOAD_ALL_KEYS_FAIL","filenames","delete","oncomplete","IDB_DELETE_SUCCESS","IDB_DELETE_FAIL","clear","IDB_DELETE_ALL_SUCCESS","IDB_DELETE_ALL_FAIL","ext","_getExtension","existingMime","_getMimeType","givenMimeType","newBlob","Blob","type","NO_MIME_TYPE","blob","validMetadataObj","parse","lastModified","Date","getTime","extension","size","callback","version","upgrade","updateVersions","old","new","open","db","versions","onupgradeneeded","IDB_WILL_UPGRADE","storeCreateIndex","options","indexNames","contains","createIndex","filesStore","oldVersion","newVersion","createObjectStore","keyPath","unique","string","indexOf","split","pop","toLowerCase","mime","browserFileStorage","logger","DEFAULT_LEVEL","LEVEL_NONE","PREFIX","_logLevel","attachedObject","BrowserFile","_createdURL","URL","createObjectURL","revokeObjectURL","_this","FileReader","reader","fileError","addEventListener","srcElement","readError","_toSomething","Alignment","align","viewSize","predefined","start","center","end","measure","Number","mathSign","deltaAbs","valueB","valueA","groupArray","groups","arrayKeys","arrayLast","lastIndex","removeClass","node","className","cl","addClass","Counter","limit","loop","max","withinLimit","counter","self","add","sign","set","clone","EventStore","listeners","removeAll","remove","Vector1D","vector","readNumber","divide","multiply","normalize","subtract","DragHandler","axis","direction","rootNode","dragFree","dragTracker","location","animation","scrollTo","scrollBody","scrollTarget","events","scrollAxis","scroll","crossAxis","focusNodes","startScroll","startCross","dragStartPoint","activationEvents","interactionEvents","snapForceBoost","mouse","touch","freeForceBoost","baseSpeed","pointerIsDown","preventScroll","preventClick","isMouse","evt","isMoving","clearPreventClick","isNotFocusNode","isFocusNode","preventDefault","addInteractionEvents","up","moveScroll","moveCross","diffScroll","diffCross","diff","rawForce","force","seekNext","currentLocation","destination","next","allowedForce","speedFactor","factorAbs","addActivationEvents","clickAllowed","pointerDown","removeAllEvents","Limit","reachedMin","reachedMax","constrain","reachedAny","removeOffset","ScrollBody","baseMass","roundToTwoDecimals","decimalPoints","pow","roundToDecimals","velocity","acceleration","attraction","attractionDirection","speed","mass","seek","iStart","oStart","magnitude","v","applyForce","settle","hasSettled","update","useBaseMass","useMass","useBaseSpeed","useSpeed","ScrollBounds","disabled","shouldConstrain","friction","diffToTarget","toggleActive","ScrollContain","contentSize","snaps","snapsAligned","containScroll","scrollBounds","snapsBounded","snapsContained","startSnap","endSnap","findDuplicates","measureContained","ScrollLooper","pxToPercent","shouldLoop","loopDistance","vectors","ScrollProgress","scrollLength","ScrollSnap","alignment","containerRect","slideRects","slidesToScroll","startEdge","endEdge","rect","groupedSnaps","g","alignments","rects","measureSizes","snap","measureAligned","ScrollTarget","indexCurrent","scrollSnaps","targetVector","t1","t2","t3","minDistance","shortest","byDistance","targetSnap","distance","scrollSnap","shortcut","diffToSnap","d1","d2","ascDiffsToSnaps","findTargetSnap","findTargetIndex","reachedBound","byIndex","SlideLooper","slideSizesWithGaps","slidesInView","scrollLocation","ascItems","descItems","loopPoints","gap","findLoopPoints","slidesInGap","startPoints","endPoints","indexes","a","removeSlideSizes","remainingGap","isStartEdge","edge","offset","slideBounds","altered","point","b","getTarget","canLoop","slides","loopPoint","SlideFocus","eventStore","lastTabPressTime","selectedIndex","Translate","container","containerStyle","translate","to","Engine","viewInPx","contentDirection","startIndex","inViewThreshold","slide","applyTo","Direction","cross","measureSize","width","height","Axis","totalPercent","sizesInPx","slideSizes","isLast","style","endGap","parseFloat","SlideSizes","measureLimit","ScrollLimit","indexPrevious","slideIndexes","animationFrame","active","cb","proceed","ifAnimating","stop","Animation","engine","settled","startLocation","loopVectors","distanceDiff","indexDiff","targetIndex","ScrollTo","findSlideBounds","thresholds","check","slideBound","list","SlidesInView","dragHandler","coords","startDrag","diffDrag","lastDrag","pointValue","trackPoints","lastMoveTime","readPoint","pointerMove","nowTime","diffTime","pointerUp","currentPoint","DragTracker","scrollLooper","scrollProgress","slideFocus","slideLooper","defaultOptions","draggable","draggableClass","draggingClass","selectedClass","EmblaCarousel","emit","getListeners","off","on","EventEmitter","debouncedResize","time","timeout","debounce","sliderRoot","rootNodeSize","reActivate","reInit","activated","Error","sliderContainer","optionsPseudo","psuedoString","OptionsPseudo","setupElements","deActivate","activate","toggleSelectedClass","setTimeout","slidesNotInView","notInView","newOptions","selectedScrollSnap","canScrollNext","canScrollPrev","prev","containerNode","dangerouslyGetEngine","destroy","previousScrollSnap","scrollNext","scrollPrev","scrollSnapList","slideNodes","embla","setEmbla","viewport","setViewport","storedOptions","activeOptions","useMemo","objectA","objectB","newEmbla_1"],"mappings":"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","file":"static/js/4.64223fb7.chunk.js","sourcesContent":["import { useRef, useState, useCallback, useEffect } from 'react';\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nvar useLatest = (function (val) {\n  var ref = useRef(val);\n  ref.current = val;\n  return ref;\n});\n\nvar observerErr = \"ðŸ’¡ react-cool-inview: the browser doesn't support Intersection Observer, please install polyfill: https://github.com/wellyshen/react-cool-inview#intersection-observer-polyfill\";\nvar observerWarn = \"ðŸ’¡ react-cool-inview: the browser doesn't support Intersection Observer v2, fallback to v1 behavior\";\n\nvar useInView = function useInView(_temp) {\n  var _ref = _temp === void 0 ? {} : _temp,\n      root = _ref.root,\n      rootMargin = _ref.rootMargin,\n      _ref$threshold = _ref.threshold,\n      threshold = _ref$threshold === void 0 ? 0 : _ref$threshold,\n      trackVisibility = _ref.trackVisibility,\n      delay = _ref.delay,\n      unobserveOnEnter = _ref.unobserveOnEnter,\n      onChange = _ref.onChange,\n      onEnter = _ref.onEnter,\n      onLeave = _ref.onLeave;\n\n  var _useState = useState({\n    inView: false,\n    scrollDirection: {}\n  }),\n      state = _useState[0],\n      setState = _useState[1];\n\n  var prevInViewRef = useRef(false);\n  var prevPosRef = useRef({});\n  var observerRef = useRef();\n  var warnedRef = useRef(false);\n  var onChangeRef = useLatest(onChange);\n  var onEnterRef = useLatest(onEnter);\n  var onLeaveRef = useLatest(onLeave);\n  var ref = useRef();\n  var unobserve = useCallback(function () {\n    if (observerRef.current) {\n      observerRef.current.disconnect();\n      prevPosRef.current = {};\n    }\n  }, []);\n  var observe = useCallback(function (element) {\n    if (element && element !== ref.current) {\n      unobserve();\n      ref.current = element;\n    }\n\n    if (observerRef.current && ref.current) observerRef.current.observe(ref.current);\n  }, [unobserve]);\n  var updatePosition = useCallback(function () {\n    if (!ref.current) return;\n\n    var _ref$current$getBound = ref.current.getBoundingClientRect(),\n        x = _ref$current$getBound.x,\n        y = _ref$current$getBound.y;\n\n    prevPosRef.current = {\n      x: x,\n      y: y\n    };\n  }, [ref]);\n  useEffect(function () {\n    if (!(\"IntersectionObserver\" in window) || !(\"IntersectionObserverEntry\" in window)) {\n      console.error(observerErr);\n      return function () {\n        return null;\n      };\n    } // eslint-disable-next-line compat/compat\n\n\n    observerRef.current = new IntersectionObserver(function (_ref2) {\n      var entry = _ref2[0];\n      var intersectionRatio = entry.intersectionRatio,\n          isIntersecting = entry.isIntersecting,\n          _entry$boundingClient = entry.boundingClientRect,\n          x = _entry$boundingClient.x,\n          y = _entry$boundingClient.y,\n          isVisible = entry.isVisible;\n      var scrollDirection = {};\n      var min = Array.isArray(threshold) ? Math.min.apply(Math, threshold) : threshold;\n      var inView = isIntersecting !== undefined ? isIntersecting : intersectionRatio > 0;\n      inView = min > 0 ? intersectionRatio >= min : inView; // @ts-expect-error\n\n      if (x < prevPosRef.current.x) scrollDirection.horizontal = \"left\"; // @ts-expect-error\n\n      if (x > prevPosRef.current.x) scrollDirection.horizontal = \"right\";\n      prevPosRef.current.x = x; // @ts-expect-error\n\n      if (y < prevPosRef.current.y) scrollDirection.vertical = \"up\"; // @ts-expect-error\n\n      if (y > prevPosRef.current.y) scrollDirection.vertical = \"down\";\n      prevPosRef.current.y = y;\n      var e = {\n        entry: entry,\n        scrollDirection: scrollDirection,\n        observe: observe,\n        unobserve: unobserve\n      };\n\n      if (trackVisibility) {\n        if (isVisible === undefined && !warnedRef.current) {\n          console.warn(observerWarn);\n          warnedRef.current = true;\n        }\n\n        if (isVisible !== undefined) inView = isVisible;\n      }\n\n      if (inView && !prevInViewRef.current) {\n        if (unobserveOnEnter) unobserve();\n        if (onEnterRef.current) onEnterRef.current(e);\n      }\n\n      if (!inView && prevInViewRef.current && onLeaveRef.current) onLeaveRef.current(e);\n      if (onChangeRef.current) onChangeRef.current(_extends({}, e, {\n        inView: inView\n      }));\n      setState({\n        inView: inView,\n        scrollDirection: scrollDirection,\n        entry: entry\n      });\n      prevInViewRef.current = inView;\n    }, {\n      root: root,\n      rootMargin: rootMargin,\n      threshold: threshold,\n      trackVisibility: trackVisibility,\n      delay: delay\n    });\n    observe();\n    return function () {\n      return unobserve();\n    }; // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [unobserveOnEnter, root, rootMargin, // eslint-disable-next-line react-hooks/exhaustive-deps\n  JSON.stringify(threshold), trackVisibility, delay, observe, unobserve]);\n  return _extends({}, state, {\n    observe: observe,\n    unobserve: unobserve,\n    updatePosition: updatePosition\n  });\n};\n\nexport default useInView;\nexport { observerErr, observerWarn };\n","var baseSum = require('./_baseSum'),\n    identity = require('./identity');\n\n/**\n * Computes the sum of the values in `array`.\n *\n * @static\n * @memberOf _\n * @since 3.4.0\n * @category Math\n * @param {Array} array The array to iterate over.\n * @returns {number} Returns the sum.\n * @example\n *\n * _.sum([4, 2, 8, 6]);\n * // => 20\n */\nfunction sum(array) {\n  return (array && array.length)\n    ? baseSum(array, identity)\n    : 0;\n}\n\nmodule.exports = sum;\n","/**\n * The base implementation of `_.sum` and `_.sumBy` without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {number} Returns the sum.\n */\nfunction baseSum(array, iteratee) {\n  var result,\n      index = -1,\n      length = array.length;\n\n  while (++index < length) {\n    var current = iteratee(array[index]);\n    if (current !== undefined) {\n      result = result === undefined ? current : (result + current);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseSum;\n","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// define __esModule on exports\n/******/ \t__webpack_require__.r = function(exports) {\n/******/ \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t}\n/******/ \t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t};\n/******/\n/******/ \t// create a fake namespace object\n/******/ \t// mode & 1: value is a module id, require it\n/******/ \t// mode & 2: merge all properties of value into the ns\n/******/ \t// mode & 4: return value when already ns object\n/******/ \t// mode & 8|1: behave like require\n/******/ \t__webpack_require__.t = function(value, mode) {\n/******/ \t\tif(mode & 1) value = __webpack_require__(value);\n/******/ \t\tif(mode & 8) return value;\n/******/ \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n/******/ \t\tvar ns = Object.create(null);\n/******/ \t\t__webpack_require__.r(ns);\n/******/ \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n/******/ \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n/******/ \t\treturn ns;\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _messages = __webpack_require__(1);\n\nvar _messages2 = _interopRequireDefault(_messages);\n\nvar _mimetypes = __webpack_require__(2);\n\nvar _mimetypes2 = _interopRequireDefault(_mimetypes);\n\nvar _logger = __webpack_require__(3);\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nvar _file = __webpack_require__(4);\n\nvar _file2 = _interopRequireDefault(_file);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar SELF = null; // This messes up if end-user uses arrow functions in some cases...\n\n// *************************** //\n// **** CLASS DECLARATION **** //\n// *************************** //\n\nvar BrowserFileStorage = function () {\n    function BrowserFileStorage() {\n        _classCallCheck(this, BrowserFileStorage);\n\n        this._init = false;\n        this._idb = null;\n        this._db = null;\n        this._namespace = null;\n        this._idb_name = \"BROWSER_FILE_STORAGE_JS\", this._idb_version = 3, this._idb = window.indexedDB || window.mozIndexedDB || window.webkitIndexedDB || window.msIndexedDB;\n        window.IDBTransaction = window.IDBTransaction || window.webkitIDBTransaction || window.msIDBTransaction || { READ_WRITE: \"readwrite\" // This line should only be needed if it is needed to support the object's constants for older browsers\n        };window.IDBKeyRange = window.IDBKeyRange || window.webkitIDBKeyRange || window.msIDBKeyRange;\n    }\n\n    // Set log level for browserFileStorage\n    // 'none', 'error', 'warn', 'info' \n\n\n    _createClass(BrowserFileStorage, [{\n        key: 'logLevel',\n        value: function logLevel(level) {\n            _logger2.default.logLevel(level);\n        }\n\n        // Init opens the inner IndexedDB database\n        // By giving it a namespace, we make a different 'Instance' of the database.\n        // Adds safety against this same library being used in more than one place within the same domain. (Just in case a library you include also includes this...)\n        // namespace can just be the name of your app\n        /**\r\n         * Opens the inner database. \r\n         * @param {string} [namespace] - Identify the inner database instance by appending your namespace. It could be your app's name.\r\n         * @returns {Promise} - Returns a Promise which resolves if the inner database is initialized properly. \r\n         */\n\n    }, {\n        key: 'init',\n        value: function init(namespace) {\n            return new Promise(function (resolve, reject) {\n                if (SELF._init) {\n                    _logger2.default.log(_logger2.default.LEVEL_ERROR, _messages2.default.IDB_ALREADY_INIT, {});\n                    return reject({ alreadyInit: true, supported: true });\n                }\n\n                if (SELF._idb) {\n                    var dbName = namespace && typeof namespace === 'string' ? SELF._idb_name + '_' + namespace : SELF._idb_name;\n                    SELF._opendb(dbName, function (err, successObj) {\n                        if (err) {\n                            _logger2.default.log(_logger2.default.LEVEL_ERROR, _messages2.default.IDB_COULD_NOT_OPEN, { dbError: true, error: err.error, e: err });\n                            return reject({ dbError: true, error: err.error, supported: true });\n                        }\n\n                        SELF._init = true;\n                        _logger2.default.log(_logger2.default.LEVEL_INFO, _messages2.default.IDB_OPEN_SUCCESS, {});\n                        return resolve({ initial: successObj.initial, supported: true });\n                    }, SELF._idb_version);\n                } else {\n                    _logger2.default.log(_logger2.default.LEVEL_ERROR, _messages2.default.IDB_NOT_SUPPORTED, {});\n                    return reject({ supported: false });\n                }\n            });\n        }\n\n        // Persist takes no arguments.\n        // It will ask or attempt to persist in whatever way the target browser deals with it\n        // Persist will always resolve unless the entire class was not initialized.\n        // Can check 'persistent' to see if request was approved by user/browser and 'canPersist' to see if it was possible in the first place. \n        /**\r\n         * Requests permission to the user/browser for file persistency. \r\n         * @returns {Promise} - Returns a Promise which resolves with an object containing persistency status.\r\n         */\n\n    }, {\n        key: 'persist',\n        value: function persist() {\n            return new Promise(function (resolve, reject) {\n                if (!SELF._init) {\n                    _logger2.default.log(_logger2.default.LEVEL_ERROR, _messages2.default.IDB_NOT_INIT, { method: 'persist' });\n                    return reject({ message: _messages2.default.IDB_NOT_INIT, init: false });\n                }\n\n                if (navigator.storage && navigator.storage.persist) {\n                    navigator.storage.persist().then(function (persistent) {\n                        if (persistent) {\n                            _logger2.default.log(_logger2.default.LEVEL_INFO, _messages2.default.IDB_PERSIST_PASS, { persistent: true, canPersist: true });\n                            return resolve({ persistent: true, canPersist: true });\n                        } else {\n                            _logger2.default.log(_logger2.default.LEVEL_WARN, _messages2.default.IDB_PERSIST_FAIL, { persistent: false, canPersist: true });\n                            return resolve({ persistent: false, canPersist: true });\n                        }\n                    });\n                } else {\n                    _logger2.default.log(_logger2.default.LEVEL_WARN, _messages2.default.IDB_PERSIST_NONE, { persistent: false, canPersist: false });\n                    return resolve({ persistent: false, canPersist: false });\n                }\n            });\n        }\n\n        // Save is in charge of taking any type of input and converting it to a common format for storing into the inner database\n        // A file will be saved, and in order to access it and load it, the filename will be the 'key'\n        // By default, same filename being used will overwrite whatever was there previously with no warning.\n        // @TODO: overwrite global option?, accept file input dialog thing, accept base64 string, accept js object -> stringify??, accept dom element?\n        /**\r\n         * Saves a file to the database\r\n         * @param {string} filename - Acts as a unique identifier for the stored file, extension may be used to determine mimetype automatically.\r\n         * @param {string | Blob | BrowserFile} contents - raw contents of the file.\r\n         * @param {string} [mimetype] - Optionally force a mimetype on the saved file, regardless of extension or if a blob already has a mimetype.\r\n         * @param {Object} [metadata] - Optionally send a JS object to store as metadata for this file.\r\n         * @returns {Promise} - Returns a Promise which resolves with the BrowserFile object that was saved.  \r\n         */\n\n    }, {\n        key: 'save',\n        value: function save(filename, contents, mimetype, metadata) {\n            return new Promise(function (resolve, reject) {\n                // Validation and Blob Creation.\n                if (!SELF._init) {\n                    _logger2.default.log(_logger2.default.LEVEL_ERROR, _messages2.default.IDB_NOT_INIT, { method: 'save' });\n                    return reject({ init: false });\n                }\n\n                if (!filename || typeof filename !== 'string' || filename.length < 1) {\n                    _logger2.default.log(_logger2.default.LEVEL_ERROR, _messages2.default.IDB_BAD_FILENAME, { invalidFilename: true });\n                    return reject({ init: true, invalidFilename: true });\n                }\n\n                var fileToSave = SELF._createFileToSave({ filename: filename, contents: contents, mimeType: mimetype, metadata: metadata });\n\n                if (!fileToSave) {\n                    _logger2.default.log(_logger2.default.LEVEL_ERROR, _messages2.default.IDB_WRONG_CONTENT, { invalidContents: true });\n                    return reject({ init: true, invalidContents: true });\n                }\n\n                // Indexed DB implementation\n                var transaction = SELF._db.transaction([\"files\"], IDBTransaction.READ_WRITE || \"readwrite\");\n                var objectStore = transaction.objectStore(\"files\");\n\n                var addRequest = objectStore.put(fileToSave._toIDB());\n\n                addRequest.onsuccess = function (event) {\n                    _logger2.default.log(_logger2.default.LEVEL_INFO, _messages2.default.IDB_SAVE_SUCCESS, { file: fileToSave, e: event });\n                    return resolve(fileToSave);\n                };\n\n                addRequest.onerror = function (event) {\n                    _logger2.default.log(_logger2.default.LEVEL_ERROR, _messages2.default.IDB_SAVE_FAIL, { e: event });\n                    return reject({ init: true, dbError: true, error: addRequest.error });\n                };\n            });\n        }\n\n        // Load will access the inner database and fetch the file as a BrowserFile object\n        /**\r\n         * Loads a file from the database.\r\n         * @param {string} filename - Acts as a unique identifier for the stored file\r\n         * @returns {Promise} - Returns a Promise which resolves if the file is loaded properly with the BrowserFile object. \r\n         */\n\n    }, {\n        key: 'load',\n        value: function load(filename) {\n            return new Promise(function (resolve, reject) {\n                if (!SELF._init) {\n                    _logger2.default.log(_logger2.default.LEVEL_ERROR, _messages2.default.IDB_NOT_INIT, { method: 'load' });\n                    return reject({ init: false });\n                }\n\n                if (!filename || typeof filename !== 'string' || filename.length < 1) {\n                    _logger2.default.log(_logger2.default.LEVEL_ERROR, _messages2.default.IDB_BAD_FILENAME, { invalidFilename: true });\n                    return reject({ init: true, invalidFilename: true });\n                }\n\n                var transaction = SELF._db.transaction([\"files\"]);\n                var objectStore = transaction.objectStore(\"files\");\n                var request = objectStore.get(filename);\n\n                request.onsuccess = function (event) {\n                    // Do something with the request.result!\n                    if (request.result) {\n                        var fileToLoad = new _file2.default(request.result);\n                        _logger2.default.log(_logger2.default.LEVEL_INFO, _messages2.default.IDB_LOAD_SUCCESS, { file: fileToLoad, e: event });\n                        return resolve(fileToLoad);\n                    } else {\n                        _logger2.default.log(_logger2.default.LEVEL_ERROR, _messages2.default.IDB_LOAD_FIND_FAIL, { e: event });\n                        return reject({ init: true, notFound: true });\n                    }\n                };\n\n                request.onerror = function (event) {\n                    _logger2.default.log(_logger2.default.LEVEL_ERROR, _messages2.default.IDB_LOAD_FAIL, { e: event });\n                    return reject({ init: true, dbError: true, error: request.error });\n                };\n            });\n        }\n\n        // Load All will load all existing saved files into an array of BrowserFile\n        /**\r\n         * Returns all currently saved files \r\n         * @returns {Promise} - Returns a Promise which resolves with an array containing all saved files.\r\n         */\n\n    }, {\n        key: 'loadAll',\n        value: function loadAll() {\n            return new Promise(function (resolve, reject) {\n                if (!SELF._init) {\n                    _logger2.default.log(_logger2.default.LEVEL_ERROR, _messages2.default.IDB_NOT_INIT, { method: 'loadAll' });\n                    return reject({ init: false });\n                }\n\n                var transaction = SELF._db.transaction([\"files\"], IDBTransaction.READ_WRITE || \"readwrite\");\n                var objectStore = transaction.objectStore(\"files\");\n\n                if (objectStore.getAll) {\n                    // Parameters for getAll (query, maxToReturnIfOver1)\n                    var getRequest = objectStore.getAll();\n\n                    getRequest.onsuccess = function (event) {\n                        var files = [];\n                        if (!event.target.result[0]) {\n                            if (event.target.result && event.target.result.filename) {\n                                files.push(new _file2.default(event.target.result));\n                            }\n                        } else {\n                            for (var r in event.target.result) {\n                                if (event.target.result[r] && event.target.result[r].filename) {\n                                    files.push(new _file2.default(event.target.result[r]));\n                                }\n                            }\n                        }\n                        _logger2.default.log(_logger2.default.LEVEL_INFO, _messages2.default.IDB_LOAD_ALL_SUCCESS, { files: files });\n                        return resolve(files);\n                    };\n\n                    getRequest.onerror = function (event) {\n                        _logger2.default.log(_logger2.default.LEVEL_ERROR, _messages2.default.IDB_LOAD_ALL_FAIL, { e: event });\n                        return reject({ init: true, dbError: true, error: getRequest.error });\n                    };\n                } else {\n                    // Fallback to the traditional cursor approach if getAll isn't supported.\n                    var files = [];\n                    var cursorRequest = objectStore.openCursor();\n\n                    cursorRequest.onsuccess = function (event) {\n                        var cursor = event.target.result;\n                        if (cursor) {\n                            if (cursor.value && cursor.value.filename) {\n                                files.push(new _file2.default(cursor.value));\n                            }\n                            cursor.continue();\n                        } else {\n                            _logger2.default.log(_logger2.default.LEVEL_INFO, _messages2.default.IDB_LOAD_ALL_SUCCESS, { files: files });\n                            return resolve(files);\n                        }\n                    };\n\n                    cursorRequest.onerror = function (event) {\n                        _logger2.default.log(_logger2.default.LEVEL_ERROR, _messages2.default.IDB_LOAD_ALL_FAIL, { e: event });\n                        return reject({ init: true, dbError: true, error: cursorRequest.error });\n                    };\n                }\n            });\n        }\n\n        // lists all filenames without loading the actual files from storage\n        /**\r\n         * Returns all current keys/filenames to files stored \r\n         * @returns {Promise} - Returns a Promise which resolves with an array containing all current keys/filenames for files stored\r\n         */\n\n    }, {\n        key: 'list',\n        value: function list() {\n            return new Promise(function (resolve, reject) {\n                if (!SELF._init) {\n                    _logger2.default.log(_logger2.default.LEVEL_ERROR, _messages2.default.IDB_NOT_INIT, { method: 'list' });\n                    return reject({ init: false });\n                }\n\n                var transaction = SELF._db.transaction([\"files\"], IDBTransaction.READ_WRITE || \"readwrite\");\n                var objectStore = transaction.objectStore(\"files\");\n\n                if (objectStore.getAllKeys) {\n                    // Parameters for getAll (query, maxToReturnIfOver1)\n                    var getRequest = objectStore.getAllKeys();\n\n                    getRequest.onsuccess = function (event) {\n                        _logger2.default.log(_logger2.default.LEVEL_INFO, _messages2.default.IDB_LOAD_ALL_KEYS_SUCCESS, { keys: event.target.result });\n                        return resolve(event.target.result);\n                    };\n\n                    getRequest.onerror = function (event) {\n                        _logger2.default.log(_logger2.default.LEVEL_ERROR, _messages2.default.IDB_LOAD_ALL_KEYS_FAIL, { e: event });\n                        return reject({ init: true, dbError: true, error: getRequest.error });\n                    };\n                } else {\n                    // Fallback to the traditional cursor approach if getAll isn't supported.\n                    var filenames = [];\n                    var cursorRequest = objectStore.openCursor();\n\n                    cursorRequest.onsuccess = function (event) {\n                        var cursor = event.target.result;\n                        if (cursor) {\n                            if (cursor.key) {\n                                filenames.push(cursor.key);\n                            }\n                            cursor.continue();\n                        } else {\n                            _logger2.default.log(_logger2.default.LEVEL_INFO, _messages2.default.IDB_LOAD_ALL_KEYS_SUCCESS, { keys: filenames });\n                            return resolve(filenames);\n                        }\n                    };\n\n                    cursorRequest.onerror = function (event) {\n                        _logger2.default.log(_logger2.default.LEVEL_ERROR, _messages2.default.IDB_LOAD_ALL_KEYS_FAIL, { e: event });\n                        return reject({ init: true, dbError: true, error: cursorRequest.error });\n                    };\n                }\n            });\n        }\n\n        // Deletes a file if it exists\n        // Even if the file does not exist, returned promise resolves.\n        /**\r\n         * Deletes a specific file from the inner database.\r\n         * @param {string} filename - Acts as a unique identifier to find the stored file.\r\n         * @returns {Promise} - Returns a Promise which resolves once the file is ensured to be deleted. \r\n         */\n\n    }, {\n        key: 'delete',\n        value: function _delete(filename) {\n            return new Promise(function (resolve, reject) {\n                if (!SELF._init) {\n                    _logger2.default.log(_logger2.default.LEVEL_ERROR, _messages2.default.IDB_NOT_INIT, { method: 'delete' });\n                    return reject({ init: false });\n                }\n\n                if (!filename || typeof filename !== 'string' || filename.length < 1) {\n                    _logger2.default.log(_logger2.default.LEVEL_ERROR, _messages2.default.IDB_BAD_FILENAME, { invalidFilename: true });\n                    return reject({ init: true, invalidFilename: true });\n                }\n\n                var transaction = SELF._db.transaction([\"files\"], IDBTransaction.READ_WRITE || \"readwrite\");\n                var objectStore = transaction.objectStore(\"files\");\n\n                var deleteRequest = objectStore.delete(filename);\n\n                transaction.oncomplete = function (event) {\n                    _logger2.default.log(_logger2.default.LEVEL_INFO, _messages2.default.IDB_DELETE_SUCCESS, {});\n                    return resolve();\n                };\n\n                transaction.onerror = function (event) {\n                    _logger2.default.log(_logger2.default.LEVEL_ERROR, _messages2.default.IDB_DELETE_FAIL, { e: event });\n                    return reject({ init: true, dbError: true, error: transaction.error });\n                };\n            });\n        }\n\n        // Delete All will delete all existing saved files within the inner database and within the namespace.\n        /**\r\n         * Deletes all current files within the inner database on this namespace.\r\n         * @returns {Promise} - Returns a Promise which resolves if the operation was successful\r\n         */\n\n    }, {\n        key: 'deleteAll',\n        value: function deleteAll() {\n            return new Promise(function (resolve, reject) {\n                if (!SELF._init) {\n                    _logger2.default.log(_logger2.default.LEVEL_ERROR, _messages2.default.IDB_NOT_INIT, { method: 'deleteAll' });\n                    return reject({ init: false });\n                }\n\n                var transaction = SELF._db.transaction([\"files\"], IDBTransaction.READ_WRITE || \"readwrite\");\n                var objectStore = transaction.objectStore(\"files\");\n\n                var clearRequest = objectStore.clear();\n\n                transaction.oncomplete = function (event) {\n                    _logger2.default.log(_logger2.default.LEVEL_INFO, _messages2.default.IDB_DELETE_ALL_SUCCESS, {});\n                    return resolve();\n                };\n\n                transaction.onerror = function (event) {\n                    _logger2.default.log(_logger2.default.LEVEL_ERROR, _messages2.default.IDB_DELETE_ALL_FAIL, { e: event });\n                    return reject({ init: true, dbError: true, error: transaction.error });\n                };\n            });\n        }\n\n        // Return a File Abstraction\n\n    }, {\n        key: '_createFileToSave',\n        value: function _createFileToSave(_ref) {\n            var filename = _ref.filename,\n                contents = _ref.contents,\n                mimeType = _ref.mimeType,\n                metadata = _ref.metadata;\n\n            if (!mimeType || typeof mimeType !== 'string' || mimeType == '') {\n                mimeType = null;\n            }\n\n            if (!contents) {\n                return;\n            }\n\n            var ext = this._getExtension(filename);\n            var existingMime = this._getMimeType(ext);\n            var givenMimeType = !mimeType || typeof mimeType !== 'string' || mimeType == '' ? null : mimeType;\n            var newBlob = null;\n\n            if (typeof contents === 'string') {\n                if (!givenMimeType) {\n                    if (ext) {\n                        if (existingMime) {\n                            newBlob = new Blob([contents], { type: existingMime });\n                        } else {\n                            _logger2.default.log(_logger2.default.LEVEL_WARN, _messages2.default.NO_MIME_TYPE, { filename: filename, contents: contents, mimeType: mimeType, method: '_createBlobToSave' });\n                            newBlob = new Blob([contents], { type: 'text/plain' });\n                        }\n                    } else {\n                        _logger2.default.log(_logger2.default.LEVEL_WARN, _messages2.default.NO_MIME_TYPE, { filename: filename, contents: contents, mimeType: mimeType, method: '_createBlobToSave' });\n                        newBlob = new Blob([contents], { type: 'text/plain' });\n                    }\n                } else {\n                    newBlob = new Blob([contents], { type: givenMimeType });\n                }\n            } else if (contents instanceof Blob) {\n                if (contents.type == '') {\n                    if (!givenMimeType) {\n                        if (existingMime) {\n                            newBlob = new Blob([contents], { type: existingMime });\n                        } else {\n                            _logger2.default.log(_logger2.default.LEVEL_WARN, _messages2.default.NO_MIME_TYPE, { filename: filename, contents: contents, mimeType: mimeType, method: '_createBlobToSave' });\n                            newBlob = new Blob([contents], { type: 'application/octet-stream' });\n                        }\n                    } else {\n                        newBlob = new Blob([contents], { type: givenMimeType });\n                    }\n                } else {\n                    if (!givenMimeType) {\n                        newBlob = contents;\n                    } else {\n                        newBlob = new Blob([contents], { type: givenMimeType });\n                    }\n                }\n            } else if (contents instanceof _file2.default) {\n                if (!givenMimeType) {\n                    if (existingMime) {\n                        newBlob = new Blob([contents.blob], { type: existingMime });\n                    } else {\n                        _logger2.default.log(_logger2.default.LEVEL_WARN, _messages2.default.NO_MIME_TYPE, { filename: filename, contents: contents, mimeType: mimeType, method: '_createBlobToSave' });\n                        newBlob = new Blob([contents.blob], { type: 'application/octet-stream' });\n                    }\n                } else {\n                    newBlob = new Blob([contents.blob], { type: givenMimeType });\n                }\n            } else {\n                return null;\n            }\n\n            var validMetadataObj = {};\n            try {\n                if (metadata && (typeof metadata === 'undefined' ? 'undefined' : _typeof(metadata)) === 'object') {\n                    validMetadataObj = JSON.parse(JSON.stringify(metadata));\n                }\n            } catch (error) {\n                validMetadataObj = {};\n            }\n\n            var fileToSave = new _file2.default({\n                filename: filename,\n                blob: newBlob,\n                lastModified: new Date().getTime(),\n                extension: ext,\n                size: newBlob.size,\n                type: newBlob.type,\n                metadata: validMetadataObj\n            });\n\n            return fileToSave;\n        }\n    }, {\n        key: '_opendb',\n        value: function _opendb(name, callback, version) {\n            var request = null;\n            var upgrade = false;\n            var initial = false;\n            var updateVersions = { old: null, new: null };\n            if (version) {\n                request = SELF._idb.open(name, version);\n            } else {\n                request = SELF._idb.open(name);\n            }\n\n            request.onerror = function (event) {\n                callback({ error: request.error, event: event, request: request });\n            };\n\n            request.onsuccess = function (event) {\n                SELF._db = request.result;\n                callback(null, { db: request.result, request: request, event: event, upgrade: upgrade, initial: initial, versions: updateVersions });\n            };\n\n            request.onupgradeneeded = function (event) {\n                upgrade = true;\n                _logger2.default.log(_logger2.default.LEVEL_WARN, _messages2.default.IDB_WILL_UPGRADE, {});\n\n                SELF._db = event.target.result;\n                var transaction = event.target.transaction;\n\n                function storeCreateIndex(objectStore, name, options) {\n                    if (!objectStore.indexNames.contains(name)) {\n                        objectStore.createIndex(name, name, options);\n                    }\n                }\n\n                var filesStore = void 0;\n                if (event.oldVersion != 0 && event.oldVersion != event.newVersion) {\n                    updateVersions.old = event.oldVersion;\n                    updateVersions.new = event.newVersion;\n                    // Actual Upgrade\n                    filesStore = transaction.objectStore('files');\n                } else {\n                    // First time initializing DB\n                    initial = true;\n                    filesStore = SELF._db.createObjectStore(\"files\", { keyPath: \"filename\" });\n                }\n\n                storeCreateIndex(filesStore, 'filename', { unique: false });\n                storeCreateIndex(filesStore, 'modified', { unique: false });\n            };\n        }\n    }, {\n        key: '_getExtension',\n        value: function _getExtension(string) {\n            var ext = null;\n            if (string.indexOf('.') != -1) {\n                ext = string.split('.').pop().toLowerCase();\n                if (ext.length <= 2) {\n                    // ???\n                    ext = null;\n                }\n            }\n            return ext;\n        }\n    }, {\n        key: '_getMimeType',\n        value: function _getMimeType(extension) {\n            var mime = null;\n            if (extension) {\n                mime = _mimetypes2.default[extension];\n            }\n            return mime;\n        }\n    }]);\n\n    return BrowserFileStorage;\n}();\n\n// ******************* //\n// **** EXPORTING **** //\n// ******************* //\n\n\nSELF = new BrowserFileStorage();\n\n// Browser export as a global\nif (typeof window !== 'undefined') {\n    window.browserFileStorage = SELF;\n}\n\n// Node / Webpack export\n// Note: This should not be required in Node, as it uses browser APIs\nexports.default = SELF;\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = {\n    IDB_NOT_SUPPORTED: \"Indexed DB is not supported on this browser.\",\n    IDB_NOT_INIT: \"Indexed DB was not initialized. Could not call method.\",\n    IDB_ALREADY_INIT: \"Indexed DB was already initialized.\",\n    IDB_OPEN_SUCCESS: \"Indexed DB Opened successfully.\",\n    IDB_WILL_UPGRADE: \"About to upgrade inner database structure.\",\n\n    IDB_PERSIST_PASS: \"Asked for persistency and succeeded. Files will remain until user manually clears them.\",\n    IDB_PERSIST_FAIL: \"Asked for persistency and failed. Files have default persistency, browser could remove them.\",\n    IDB_PERSIST_NONE: \"Could not ask for persistency. Files have default persistency, browser could remove them.\",\n\n    IDB_BAD_FILENAME: \"Filename is not a string, or is empty.\",\n    IDB_WRONG_CONTENT: \"Content given is not valid [String, Blob, or FileAbstraction]\",\n\n    IDB_SAVE_SUCCESS: \"Successfully saved a file to database.\",\n    IDB_SAVE_FAIL: \"Failed at saving file to database.\",\n\n    IDB_LOAD_SUCCESS: \"Successfully loaded a file from database.\",\n    IDB_LOAD_FIND_FAIL: \"Could not find the file in the database.\",\n    IDB_LOAD_FAIL: \"Failed at loading file from database.\",\n\n    IDB_LOAD_ALL_SUCCESS: \"Successfully loaded all files from database.\",\n    IDB_LOAD_ALL_FAIL: \"Could not load all files from the database.\",\n\n    IDB_LOAD_ALL_KEYS_SUCCESS: \"Successfully loaded all keys/filenames from database.\",\n    IDB_LOAD_ALL_KEYS_FAIL: \"Could not load all keys/filenames from the database.\",\n\n    IDB_DELETE_SUCCESS: \"Successfully deleted a file from database.\",\n    IDB_DELETE_FAIL: \"Failed at deleting file from database.\",\n\n    IDB_DELETE_ALL_SUCCESS: \"Successfully deleted all files from database.\",\n    IDB_DELETE_ALL_FAIL: \"Could not delete all files from the database.\",\n\n    NO_MIME_TYPE: \"Cannot auto-detect mimetype for filename, setting mimetype to a safe default type\"\n};\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = {\n    \"aac\": \"audio/aac\",\n    \"abw\": \"application/x-abiword\",\n    \"arc\": \"application/octet-stream\",\n    \"avi\": \"video/x-msvideo\",\n    \"azw\": \"application/vnd.amazon.ebook\",\n    \"bin\": \"application/octet-stream\",\n    \"bmp\": \"image/bmp\",\n    \"bz\": \"application/x-bzip\",\n    \"bz2\": \"application/x-bzip2\",\n    \"csh\": \"application/x-csh\",\n    \"css\": \"text/css\",\n    \"csv\": \"text/csv\",\n    \"doc\": \"application/msword\",\n    \"docx\": \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\",\n    \"eot\": \"application/vnd.ms-fontobject\",\n    \"epub\": \"application/epub+zip\",\n    \"es\": \"application/ecmascript\",\n    \"gif\": \"image/gif\",\n    \"htm\": \"text/html\",\n    \"html\": \"text/html\",\n    \"ico\": \"image/x-icon\",\n    \"ics\": \"text/calendar\",\n    \"jar\": \"application/java-archive\",\n    \"jpeg\": \"image/jpeg\",\n    \"js\": \"application/javascript\",\n    \"json\": \"application/json\",\n    \"mid\": \"audio/midi\",\n    \"mpeg\": \"video/mpeg\",\n    \"mp4\": \"video/mp4\",\n    \"mpkg\": \"application/vnd.apple.installer+xml\",\n    \"odp\": \"application/vnd.oasis.opendocument.presentation\",\n    \"ods\": \"application/vnd.oasis.opendocument.spreadsheet\",\n    \"odt\": \"application/vnd.oasis.opendocument.text\",\n    \"oga\": \"audio/ogg\",\n    \"ogv\": \"video/ogg\",\n    \"ogx\": \"application/ogg\",\n    \"otf\": \"font/otf\",\n    \"png\": \"image/png\",\n    \"pdf\": \"application/pdf\",\n    \"ppt\": \"application/vnd.ms-powerpoint\",\n    \"pptx\": \"application/vnd.openxmlformats-officedocument.presentationml.presentation\",\n    \"rar\": \"application/x-rar-compressed\",\n    \"rtf\": \"application/rtf\",\n    \"sh\": \"application/x-sh\",\n    \"svg\": \"image/svg+xml\",\n    \"swf\": \"application/x-shockwave-flash\",\n    \"tar\": \"application/x-tar\",\n    \"tiff\": \"image/tiff\",\n    \"tif\": \"image/tiff\",\n    \"ts\": \"application/typescript\",\n    \"ttf\": \"font/ttf\",\n    \"txt\": \"text/plain\",\n    \"vsd\": \"application/vnd.visio\",\n    \"wav\": \"audio/wav\",\n    \"weba\": \"audio/webm\",\n    \"webm\": \"video/webm\",\n    \"webp\": \"image/webp\",\n    \"woff\": \"font/woff\",\n    \"woff2\": \"font/woff2\",\n    \"xhtml\": \"application/xhtml+xml\",\n    \"xls\": \"application/vnd.ms-excel\",\n    \"xlsx\": \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\",\n    \"xml\": \"application/xml\",\n    \"xul\": \"application/vnd.mozilla.xul+xml\",\n    \"zip\": \"application/zip\",\n    \"3gp\": \"video/3gpp\",\n    \"3g2\": \"video/3gpp2\",\n    \"7z\": \"application/x-7z-compressed\"\n};\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nvar logger = {\n    DEFAULT_LEVEL: 1,\n    LEVEL_NONE: 0,\n    LEVEL_ERROR: 1,\n    LEVEL_WARN: 2,\n    LEVEL_INFO: 3,\n    PREFIX: 'Browser File Storage - '\n};\n\nvar log = function log(level, message, attachedObject) {\n    if (logger._logLevel >= level) {\n        console.log(logger.PREFIX + message, attachedObject);\n    }\n};\n\nvar logLevel = function logLevel(level) {\n    if (typeof level === 'number') {\n        logger._logLevel = level;\n    } else if (typeof level == 'string') {\n        if (level == 'none') {\n            logger._logLevel = logger.LEVEL_NONE;\n        } else if (level == 'error') {\n            logger._logLevel = logger.LEVEL_ERROR;\n        } else if (level == 'warn') {\n            logger._logLevel = logger.LEVEL_WARN;\n        } else if (level == 'info') {\n            logger._logLevel = logger.LEVEL_INFO;\n        }\n    } else {\n        logger._logLevel = logger.DEFAULT_LEVEL;\n    }\n};\n\nlogger._logLevel = logger.DEFAULT_LEVEL;\nlogger.log = log;\nlogger.logLevel = logLevel;\n\nexports.default = logger;\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar BrowserFile = function () {\n    function BrowserFile(props) {\n        _classCallCheck(this, BrowserFile);\n\n        this.filename = props.filename;\n        this.lastModified = props.lastModified;\n        this.blob = props.blob;\n        this.extension = props.extension;\n        this.size = props.size;\n        this.type = props.type;\n        this.metadata = props.metadata;\n    }\n\n    _createClass(BrowserFile, [{\n        key: '_toIDB',\n        value: function _toIDB() {\n            return {\n                filename: this.filename,\n                lastModified: this.lastModified,\n                blob: this.blob,\n                extension: this.extension,\n                size: this.size,\n                type: this.type,\n                metadata: this.metadata\n            };\n        }\n    }, {\n        key: 'createURL',\n        value: function createURL() {\n            if (this._createdURL) {\n                return this._createdURL;\n            }\n            this._createdURL = URL.createObjectURL(this.blob);\n            return this._createdURL;\n        }\n    }, {\n        key: 'destroyURL',\n        value: function destroyURL() {\n            if (this._createdURL) {\n                URL.revokeObjectURL(this._createdURL);\n                this._createdURL = null;\n            }\n        }\n    }, {\n        key: '_toSomething',\n        value: function _toSomething(mode) {\n            var _this = this;\n\n            return new Promise(function (resolve, reject) {\n                if (FileReader) {\n                    var reader = new FileReader();\n\n                    if (!_this.blob) {\n                        return reject({ supported: true, fileError: true });\n                    }\n\n                    reader.addEventListener('loadend', function (e) {\n                        return resolve(e.srcElement.result);\n                    });\n\n                    reader.addEventListener('error', function (e) {\n                        return reject({ supported: true, readError: true, e: e });\n                    });\n\n                    reader[mode](_this.blob);\n                } else {\n                    return reject({ supported: false });\n                }\n            });\n        }\n    }, {\n        key: 'toString',\n        value: function toString() {\n            return this._toSomething('readAsText');\n        }\n    }, {\n        key: 'toBinaryString',\n        value: function toBinaryString() {\n            return this._toSomething('readAsBinaryString');\n        }\n    }, {\n        key: 'toArrayBuffer',\n        value: function toArrayBuffer() {\n            return this._toSomething('readAsArrayBuffer');\n        }\n    }, {\n        key: 'toDataURL',\n        value: function toDataURL() {\n            return this._toSomething('readAsDataURL');\n        }\n    }]);\n\n    return BrowserFile;\n}();\n\nexports.default = BrowserFile;\n\n/***/ })\n/******/ ]);\n});","export type AlignmentOptionType = 'start' | 'center' | 'end' | number\n\nexport type AlignmentType = {\n  measure: (n: number) => number\n}\n\nexport function Alignment(\n  align: AlignmentOptionType,\n  viewSize: number,\n): AlignmentType {\n  const predefined = { start, center, end }\n\n  function start(): number {\n    return 0\n  }\n\n  function center(n: number): number {\n    return end(n) / 2\n  }\n\n  function end(n: number): number {\n    return viewSize - n\n  }\n\n  function percent(): number {\n    return viewSize * Number(align)\n  }\n\n  function measure(n: number): number {\n    if (typeof align === 'number') return percent()\n    return predefined[align](n)\n  }\n\n  const self: AlignmentType = {\n    measure,\n  }\n  return self\n}\n","export function map(\n  value: number,\n  iStart: number,\n  iStop: number,\n  oStart: number,\n  oStop: number,\n): number {\n  return oStart + (oStop - oStart) * ((value - iStart) / (iStop - iStart))\n}\n\nexport function mathSign(n: number): number {\n  return !n ? 0 : n / Math.abs(n)\n}\n\nexport function deltaAbs(valueB: number, valueA: number): number {\n  return Math.abs(valueB - valueA)\n}\n\nexport function factorAbs(valueB: number, valueA: number): number {\n  if (valueB === 0 || valueA === 0) return 0\n  if (Math.abs(valueB) <= Math.abs(valueA)) return 0\n  const diff = deltaAbs(Math.abs(valueB), Math.abs(valueA))\n  return Math.abs(diff / valueB)\n}\n\nexport function roundToDecimals(decimalPoints: number): (n: number) => number {\n  const pow = Math.pow(10, decimalPoints)\n  return (n: number): number => Math.round(n * pow) / pow\n}\n\nexport function debounce(callback: () => void, time: number): () => void {\n  let timeout = 0\n  return (): void => {\n    window.clearTimeout(timeout)\n    timeout = window.setTimeout(callback, time) || 0\n  }\n}\n\nexport function groupArray<GenericType>(\n  array: GenericType[],\n  size: number,\n): GenericType[][] {\n  const groups = []\n  for (let i = 0; i < array.length; i += size) {\n    groups.push(array.slice(i, i + size))\n  }\n  return groups\n}\n\nexport function arrayKeys<GenericType>(array: GenericType[]): number[] {\n  return Object.keys(array).map(Number)\n}\n\nexport function arrayLast<GenericType>(array: GenericType[]): GenericType {\n  return array[lastIndex(array)]\n}\n\nexport function lastIndex<GenericType>(array: GenericType[]): number {\n  return Math.max(0, array.length - 1)\n}\n\nexport function removeClass(node: HTMLElement, className: string): void {\n  const cl = node.classList\n  if (className && cl.contains(className)) cl.remove(className)\n}\n\nexport function addClass(node: HTMLElement, className: string): void {\n  const cl = node.classList\n  if (className && !cl.contains(className)) cl.add(className)\n}\n","import { LimitType } from './limit'\nimport { mathSign } from './utils'\n\nexport type CounterType = {\n  min: number\n  max: number\n  get: () => number\n  set: (n: number) => CounterType\n  add: (n: number) => CounterType\n  clone: () => CounterType\n}\n\nexport function Counter(\n  limit: LimitType,\n  loop: boolean,\n  start: number,\n): CounterType {\n  const { min, max } = limit\n  const type = loop ? 'loop' : 'constrain'\n  const withinLimit = limit[type]\n  let counter = withinLimit(start)\n\n  function get(): number {\n    return counter\n  }\n\n  function set(n: number): CounterType {\n    counter = withinLimit(n)\n    return self\n  }\n\n  function add(n: number): CounterType {\n    if (n !== 0) {\n      const sign = mathSign(n)\n      set(get() + sign)\n      return add(n + sign * -1)\n    }\n    return self\n  }\n\n  function clone(): CounterType {\n    return Counter(limit, loop, get())\n  }\n\n  const self: CounterType = {\n    add,\n    clone,\n    get,\n    max,\n    min,\n    set,\n  }\n  return self\n}\n","type EventRemoverType = () => void\ntype EventHandlerType = EventListener | EventListenerObject | null\ntype EventOptionsType = boolean | AddEventListenerOptions | undefined\n\nexport type EventStoreType = {\n  add: (\n    node: EventTarget,\n    type: keyof WindowEventMap,\n    handler: EventHandlerType,\n    options?: EventOptionsType,\n  ) => EventStoreType\n  removeAll: () => EventStoreType\n}\n\nexport function EventStore(): EventStoreType {\n  let listeners: EventRemoverType[] = []\n\n  function add(\n    node: EventTarget,\n    type: string,\n    handler: EventHandlerType,\n    options: EventOptionsType = false,\n  ): EventStoreType {\n    node.addEventListener(type, handler, options)\n    listeners.push(() => {\n      return node.removeEventListener(type, handler, options)\n    })\n    return self\n  }\n\n  function removeAll(): EventStoreType {\n    listeners = listeners.filter((remove) => remove())\n    return self\n  }\n\n  const self: EventStoreType = {\n    add,\n    removeAll,\n  }\n  return self\n}\n","export type Vector1DType = {\n  get: () => number\n  set: (v: Vector1DType | number) => Vector1DType\n  add: (v: Vector1DType | number) => Vector1DType\n  subtract: (v: Vector1DType | number) => Vector1DType\n  multiply: (n: number) => Vector1DType\n  divide: (n: number) => Vector1DType\n  normalize: () => Vector1DType\n}\n\nexport function Vector1D(value: number): Vector1DType {\n  let vector = value\n\n  function get(): number {\n    return vector\n  }\n\n  function set(n: Vector1DType | number): Vector1DType {\n    vector = readNumber(n)\n    return self\n  }\n\n  function add(n: Vector1DType | number): Vector1DType {\n    vector += readNumber(n)\n    return self\n  }\n\n  function subtract(n: Vector1DType | number): Vector1DType {\n    vector -= readNumber(n)\n    return self\n  }\n\n  function multiply(n: number): Vector1DType {\n    vector *= n\n    return self\n  }\n\n  function divide(n: number): Vector1DType {\n    vector /= n\n    return self\n  }\n\n  function normalize(): Vector1DType {\n    if (vector !== 0) divide(vector)\n    return self\n  }\n\n  function readNumber(n: Vector1DType | number): number {\n    return typeof n === 'number' ? n : n.get()\n  }\n\n  const self: Vector1DType = {\n    add,\n    divide,\n    get,\n    multiply,\n    normalize,\n    set,\n    subtract,\n  }\n  return self\n}\n","import { AnimationType } from './animation'\nimport { CounterType } from './counter'\nimport { DirectionType } from './direction'\nimport { DragTrackerType } from './dragTracker'\nimport { EventEmitterType } from './eventEmitter'\nimport { AxisType } from './axis'\nimport { EventStore } from './eventStore'\nimport { LimitType } from './limit'\nimport { ScrollBodyType } from './scrollBody'\nimport { ScrollTargetType } from './scrollTarget'\nimport { ScrollToType } from './scrollTo'\nimport { Vector1D, Vector1DType } from './vector1d'\nimport { deltaAbs, factorAbs, mathSign } from './utils'\n\nexport type DragHandlerType = {\n  addActivationEvents: () => void\n  clickAllowed: () => boolean\n  pointerDown: () => boolean\n  removeAllEvents: () => void\n}\n\nexport function DragHandler(\n  axis: AxisType,\n  direction: DirectionType,\n  rootNode: HTMLElement,\n  target: Vector1DType,\n  dragFree: boolean,\n  dragTracker: DragTrackerType,\n  location: Vector1DType,\n  animation: AnimationType,\n  scrollTo: ScrollToType,\n  scrollBody: ScrollBodyType,\n  scrollTarget: ScrollTargetType,\n  index: CounterType,\n  limit: LimitType,\n  events: EventEmitterType,\n): DragHandlerType {\n  const { scroll: scrollAxis, cross: crossAxis } = axis\n  const focusNodes = ['INPUT', 'SELECT', 'TEXTAREA']\n  const startScroll = Vector1D(0)\n  const startCross = Vector1D(0)\n  const dragStartPoint = Vector1D(0)\n  const activationEvents = EventStore()\n  const interactionEvents = EventStore()\n  const snapForceBoost = { mouse: 2.5, touch: 3.5 }\n  const freeForceBoost = { mouse: 5, touch: 7 }\n  const baseSpeed = dragFree ? 5 : 12\n  const dragThreshold = 4\n\n  let pointerIsDown = false\n  let preventScroll = false\n  let preventClick = false\n  let isMouse = false\n\n  function addActivationEvents(): void {\n    const node = rootNode\n    activationEvents\n      .add(node, 'touchmove', () => undefined)\n      .add(node, 'touchend', () => undefined)\n      .add(node, 'touchstart', down)\n      .add(node, 'mousedown', down)\n      .add(node, 'touchcancel', up)\n      .add(node, 'contextmenu', up)\n      .add(node, 'click', click)\n  }\n\n  function addInteractionEvents(): void {\n    const node = !isMouse ? rootNode : document\n    interactionEvents\n      .add(node, 'touchmove', move)\n      .add(node, 'touchend', up)\n      .add(node, 'mousemove', move)\n      .add(node, 'mouseup', up)\n  }\n\n  function removeAllEvents(): void {\n    activationEvents.removeAll()\n    interactionEvents.removeAll()\n  }\n\n  function isFocusNode(node: Element): boolean {\n    const name = node.nodeName || ''\n    return focusNodes.indexOf(name) > -1\n  }\n\n  function forceBoost(): number {\n    const boost = dragFree ? freeForceBoost : snapForceBoost\n    const type = isMouse ? 'mouse' : 'touch'\n    return boost[type]\n  }\n\n  function allowedForce(force: number): number {\n    const currentLocation = scrollTarget.byDistance(0, false)\n    const targetChanged = currentLocation.index !== index.get()\n    const seekNext = !targetChanged && Math.abs(force) > dragThreshold\n    const destination = force + location.get()\n\n    if (seekNext && !dragFree && !limit.reachedAny(destination)) {\n      const next = index.clone().add(mathSign(force) * -1)\n      return scrollTarget.byIndex(next.get(), 0).distance\n    }\n    return scrollTarget.byDistance(force, !dragFree).distance\n  }\n\n  function down(evt: Event): void {\n    isMouse = evt.type === 'mousedown'\n    if (isMouse && (evt as MouseEvent).button !== 0) return\n\n    const isMoving = deltaAbs(target.get(), location.get()) >= 2\n    const clearPreventClick = isMouse || !isMoving\n    const isNotFocusNode = !isFocusNode(evt.target as Element)\n    const preventDefault = isMoving || (isMouse && isNotFocusNode)\n\n    pointerIsDown = true\n    dragTracker.pointerDown(evt)\n    dragStartPoint.set(target)\n    target.set(location)\n    scrollBody.useBaseMass().useSpeed(80)\n    addInteractionEvents()\n    startScroll.set(dragTracker.readPoint(evt, scrollAxis))\n    startCross.set(dragTracker.readPoint(evt, crossAxis))\n    events.emit('pointerDown')\n\n    if (clearPreventClick) preventClick = false\n    if (preventDefault) evt.preventDefault()\n  }\n\n  function move(evt: Event): void {\n    if (!preventScroll && !isMouse) {\n      if (!evt.cancelable) return up()\n      const moveScroll = dragTracker.readPoint(evt, scrollAxis).get()\n      const moveCross = dragTracker.readPoint(evt, crossAxis).get()\n      const diffScroll = deltaAbs(moveScroll, startScroll.get())\n      const diffCross = deltaAbs(moveCross, startCross.get())\n      preventScroll = diffScroll > diffCross\n      if (!preventScroll && !preventClick) return up()\n    }\n    const diff = dragTracker.pointerMove(evt)\n    if (!preventClick && diff) preventClick = true\n    animation.start()\n    target.add(direction.applyTo(diff))\n    evt.preventDefault()\n  }\n\n  function up(): void {\n    const rawForce = dragTracker.pointerUp() * forceBoost()\n    const force = allowedForce(direction.applyTo(rawForce))\n    const speedFactor = factorAbs(rawForce, force)\n    const isMoving = deltaAbs(target.get(), dragStartPoint.get()) >= 0.5\n\n    if (isMoving && !isMouse) preventClick = true\n    preventScroll = false\n    pointerIsDown = false\n    interactionEvents.removeAll()\n    scrollBody.useSpeed(baseSpeed + baseSpeed * speedFactor)\n    scrollTo.distance(force, !dragFree)\n    isMouse = false\n    events.emit('pointerUp')\n  }\n\n  function click(evt: Event): void {\n    if (preventClick) evt.preventDefault()\n  }\n\n  function clickAllowed(): boolean {\n    return !preventClick\n  }\n\n  function pointerDown(): boolean {\n    return pointerIsDown\n  }\n\n  const self: DragHandlerType = {\n    addActivationEvents,\n    clickAllowed,\n    pointerDown,\n    removeAllEvents,\n  }\n  return self\n}\n","export type LimitType = {\n  min: number\n  max: number\n  length: number\n  loop: (n: number) => number\n  constrain: (n: number) => number\n  reachedAny: (n: number) => boolean\n  reachedMax: (n: number) => boolean\n  reachedMin: (n: number) => boolean\n  removeOffset: (n: number) => number\n}\n\nexport function Limit(min: number, max: number): LimitType {\n  const length = Math.abs(min - max)\n\n  function reachedMin(n: number): boolean {\n    return n < min\n  }\n\n  function reachedMax(n: number): boolean {\n    return n > max\n  }\n\n  function reachedAny(n: number): boolean {\n    return reachedMin(n) || reachedMax(n)\n  }\n\n  function removeOffset(n: number): number {\n    if (min === max) return n\n    while (reachedMin(n)) n += length\n    while (reachedMax(n)) n -= length\n    return n\n  }\n\n  function loop(n: number): number {\n    if (!reachedAny(n)) return n\n    return reachedMin(n) ? max : min\n  }\n\n  function constrain(n: number): number {\n    if (!reachedAny(n)) return n\n    return reachedMin(n) ? min : max\n  }\n\n  const self: LimitType = {\n    constrain,\n    length,\n    loop,\n    max,\n    min,\n    reachedAny,\n    reachedMax,\n    reachedMin,\n    removeOffset,\n  }\n  return self\n}\n","import { map, roundToDecimals, mathSign } from './utils'\nimport { Vector1D, Vector1DType } from './vector1d'\n\nexport type ScrollBodyType = {\n  direction: () => number\n  seek: (v: Vector1DType) => ScrollBodyType\n  settle: (v: Vector1DType) => boolean\n  update: () => void\n  useBaseMass: () => ScrollBodyType\n  useBaseSpeed: () => ScrollBodyType\n  useMass: (n: number) => ScrollBodyType\n  useSpeed: (n: number) => ScrollBodyType\n}\n\nexport function ScrollBody(\n  location: Vector1DType,\n  baseSpeed: number,\n  baseMass: number,\n): ScrollBodyType {\n  const roundToTwoDecimals = roundToDecimals(2)\n  const velocity = Vector1D(0)\n  const acceleration = Vector1D(0)\n  const attraction = Vector1D(0)\n\n  let attractionDirection = 0\n  let speed = baseSpeed\n  let mass = baseMass\n\n  function update(): void {\n    velocity.add(acceleration)\n    location.add(velocity)\n    acceleration.multiply(0)\n  }\n\n  function applyForce(v: Vector1DType): void {\n    v.divide(mass)\n    acceleration.add(v)\n  }\n\n  function seek(v: Vector1DType): ScrollBodyType {\n    attraction.set(v).subtract(location)\n    const magnitude = map(attraction.get(), 0, 100, 0, speed)\n    attractionDirection = mathSign(attraction.get())\n    attraction.normalize().multiply(magnitude).subtract(velocity)\n    applyForce(attraction)\n    return self\n  }\n\n  function settle(v: Vector1DType): boolean {\n    const diff = v.get() - location.get()\n    const hasSettled = !roundToTwoDecimals(diff)\n    if (hasSettled) location.set(v)\n    return hasSettled\n  }\n\n  function direction(): number {\n    return attractionDirection\n  }\n\n  function useBaseSpeed(): ScrollBodyType {\n    return useSpeed(baseSpeed)\n  }\n\n  function useBaseMass(): ScrollBodyType {\n    return useMass(baseMass)\n  }\n\n  function useSpeed(n: number): ScrollBodyType {\n    speed = n\n    return self\n  }\n\n  function useMass(n: number): ScrollBodyType {\n    mass = n\n    return self\n  }\n\n  const self: ScrollBodyType = {\n    direction,\n    seek,\n    settle,\n    update,\n    useBaseMass,\n    useBaseSpeed,\n    useMass,\n    useSpeed,\n  }\n  return self\n}\n","import { LimitType } from './limit'\nimport { ScrollBodyType } from './scrollBody'\nimport { Vector1DType } from './vector1d'\n\nexport type ScrollBoundsType = {\n  constrain: (v: Vector1DType, pointerDown: boolean) => void\n  toggleActive: (active: boolean) => void\n}\n\nexport function ScrollBounds(\n  limit: LimitType,\n  location: Vector1DType,\n  scrollBody: ScrollBodyType,\n): ScrollBoundsType {\n  const pullBackThreshold = 10\n  let disabled = false\n\n  function shouldConstrain(target: Vector1DType): boolean {\n    if (disabled) return false\n    if (!limit.reachedAny(target.get())) return false\n    if (!limit.reachedAny(location.get())) return false\n    return true\n  }\n\n  function constrain(target: Vector1DType, pointerDown: boolean): void {\n    if (!shouldConstrain(target)) return\n    const friction = pointerDown ? 0.7 : 0.4\n    const diffToTarget = target.get() - location.get()\n\n    target.subtract(diffToTarget * friction)\n\n    if (!pointerDown && Math.abs(diffToTarget) < pullBackThreshold) {\n      target.set(limit.constrain(target.get()))\n      scrollBody.useSpeed(10).useMass(3)\n    }\n  }\n\n  function toggleActive(active: boolean): void {\n    disabled = !active\n  }\n\n  const self: ScrollBoundsType = {\n    constrain,\n    toggleActive,\n  }\n  return self\n}\n","import { Limit, LimitType } from './limit'\nimport { arrayLast } from './utils'\n\nexport type ScrollContainOptionType = '' | 'trimSnaps' | 'keepSnaps'\n\nexport type ScrollContainType = {\n  snapsContained: number[]\n}\n\nexport function ScrollContain(\n  viewSize: number,\n  contentSize: number,\n  snaps: number[],\n  snapsAligned: number[],\n  containScroll: ScrollContainOptionType,\n): ScrollContainType {\n  const scrollBounds = Limit(-contentSize + viewSize, snaps[0])\n  const snapsBounded = snapsAligned.map(scrollBounds.constrain)\n  const snapsContained = measureContained()\n\n  function findDuplicates(): LimitType {\n    const startSnap = snapsBounded[0]\n    const endSnap = arrayLast(snapsBounded)\n    const min = snapsBounded.lastIndexOf(startSnap)\n    const max = snapsBounded.indexOf(endSnap) + 1\n    return Limit(min, max)\n  }\n\n  function measureContained(): number[] {\n    if (contentSize <= viewSize) return [scrollBounds.max]\n    if (containScroll === 'keepSnaps') return snapsBounded\n    const { min, max } = findDuplicates()\n    return snapsBounded.slice(min, max)\n  }\n\n  const self: ScrollContainType = {\n    snapsContained,\n  }\n  return self\n}\n","import { Limit, LimitType } from './limit'\nimport { PxToPercentType } from './pxToPercent'\nimport { Vector1DType } from './vector1d'\n\nexport type ScrollLooperType = {\n  loop: (vectors: Vector1DType[], direction: number) => void\n}\n\nexport function ScrollLooper(\n  contentSize: number,\n  pxToPercent: PxToPercentType,\n  limit: LimitType,\n  location: Vector1DType,\n): ScrollLooperType {\n  const min = limit.min + pxToPercent.measure(0.1)\n  const max = limit.max + pxToPercent.measure(0.1)\n  const { reachedMin, reachedMax } = Limit(min, max)\n\n  function shouldLoop(direction: number): boolean {\n    if (direction === 1) return reachedMax(location.get())\n    if (direction === -1) return reachedMin(location.get())\n    return false\n  }\n\n  function loop(vectors: Vector1DType[], direction: number): void {\n    if (!shouldLoop(direction)) return\n\n    const loopDistance = contentSize * (direction * -1)\n    vectors.forEach((v) => v.add(loopDistance))\n  }\n\n  const self: ScrollLooperType = {\n    loop,\n  }\n  return self\n}\n","import { LimitType } from './limit'\n\nexport type ScrollProgressType = {\n  get: (n: number) => number\n}\n\nexport function ScrollProgress(limit: LimitType): ScrollProgressType {\n  const { max, length: scrollLength } = limit\n\n  function get(n: number): number {\n    const currentLocation = n - max\n    return currentLocation / -scrollLength\n  }\n\n  const self: ScrollProgressType = {\n    get,\n  }\n  return self\n}\n","import { AlignmentType } from './alignment'\nimport { AxisType } from './axis'\nimport { PxToPercentType } from './pxToPercent'\nimport { arrayLast, groupArray } from './utils'\n\nexport type ScrollSnapType = {\n  snaps: number[]\n  snapsAligned: number[]\n}\n\nexport function ScrollSnap(\n  axis: AxisType,\n  alignment: AlignmentType,\n  pxToPercent: PxToPercentType,\n  containerRect: DOMRect,\n  slideRects: DOMRect[],\n  slidesToScroll: number,\n): ScrollSnapType {\n  const { startEdge, endEdge } = axis\n  const snaps = measureUnaligned()\n  const snapsAligned = measureAligned()\n\n  function measureSizes(): number[] {\n    return groupArray(slideRects, slidesToScroll)\n      .map((rects) => arrayLast(rects)[endEdge] - rects[0][startEdge])\n      .map(pxToPercent.measure)\n      .map(Math.abs)\n  }\n\n  function measureUnaligned(): number[] {\n    return slideRects\n      .map((rect) => containerRect[startEdge] - rect[startEdge])\n      .map(pxToPercent.measure)\n      .map((snap) => -Math.abs(snap))\n  }\n\n  function measureAligned(): number[] {\n    const groupedSnaps = groupArray(snaps, slidesToScroll).map((g) => g[0])\n    const alignments = measureSizes().map(alignment.measure)\n    return groupedSnaps.map((snap, index) => snap + alignments[index])\n  }\n\n  const self: ScrollSnapType = {\n    snaps,\n    snapsAligned,\n  }\n  return self\n}\n","import { CounterType } from './counter'\nimport { LimitType } from './limit'\nimport { Vector1DType } from './vector1d'\n\nexport type TargetType = {\n  distance: number\n  index: number\n}\n\nexport type ScrollTargetType = {\n  byIndex: (target: number, direction: number) => TargetType\n  byDistance: (force: number, snap: boolean) => TargetType\n  shortcut: (target: number, direction: number) => number\n}\n\nexport function ScrollTarget(\n  indexCurrent: CounterType,\n  loop: boolean,\n  scrollSnaps: number[],\n  contentSize: number,\n  limit: LimitType,\n  targetVector: Vector1DType,\n): ScrollTargetType {\n  const { reachedMax, reachedAny, removeOffset } = limit\n\n  function minDistance(d1: number, d2: number): number {\n    return Math.abs(d1) < Math.abs(d2) ? d1 : d2\n  }\n\n  function findTargetSnap(target: number): TargetType {\n    const distance = removeOffset(target)\n    const ascDiffsToSnaps = scrollSnaps\n      .map((scrollSnap) => scrollSnap - distance)\n      .map((diffToSnap) => shortcut(diffToSnap, 0))\n      .map((diff, i) => ({ diff, index: i }))\n      .sort((d1, d2) => Math.abs(d1.diff) - Math.abs(d2.diff))\n\n    const { index } = ascDiffsToSnaps[0]\n    return { index, distance }\n  }\n\n  function shortcut(target: number, direction: number): number {\n    const t1 = target\n    const t2 = target + contentSize\n    const t3 = target - contentSize\n\n    if (!loop) return t1\n    if (!direction) return minDistance(minDistance(t1, t2), t3)\n\n    const shortest = minDistance(t1, direction === 1 ? t2 : t3)\n    return Math.abs(shortest) * direction\n  }\n\n  function findTargetIndex(target: number, index: number): number {\n    const reachedBound = !loop && reachedAny(target)\n    if (!reachedBound) return index\n\n    const { min, max } = indexCurrent\n    return reachedMax(target) ? min : max\n  }\n\n  function byIndex(index: number, direction: number): TargetType {\n    const diffToSnap = scrollSnaps[index] - targetVector.get()\n    const distance = shortcut(diffToSnap, direction)\n    return { index, distance }\n  }\n\n  function byDistance(distance: number, snap: boolean): TargetType {\n    const target = targetVector.get() + distance\n    const targetSnap = findTargetSnap(target)\n    const index = findTargetIndex(target, targetSnap.index)\n    const reachedBound = !loop && reachedAny(target)\n\n    if (!snap || reachedBound) return { index, distance }\n\n    const diffToSnap = scrollSnaps[index] - targetSnap.distance\n    const snapDistance = distance + shortcut(diffToSnap, 0)\n\n    return { index, distance: snapDistance }\n  }\n\n  const self: ScrollTargetType = {\n    byDistance,\n    byIndex,\n    shortcut,\n  }\n  return self\n}\n","import { AxisType } from './axis'\nimport { arrayKeys } from './utils'\nimport { SlidesInViewType } from './slidesInView'\nimport { Vector1DType } from './vector1d'\n\ntype LoopEdgeType = 'start' | 'end'\n\ntype LoopPointType = {\n  point: number\n  location: number\n  index: number\n  getTarget: () => number\n}\n\nexport type SlideLooperType = {\n  canLoop: () => boolean\n  clear: (slides: HTMLElement[]) => void\n  loop: (slides: HTMLElement[]) => void\n  loopPoints: LoopPointType[]\n}\n\nexport function SlideLooper(\n  axis: AxisType,\n  viewSize: number,\n  contentSize: number,\n  slideSizesWithGaps: number[],\n  scrollSnaps: number[],\n  slidesInView: SlidesInViewType,\n  scrollLocation: Vector1DType,\n): SlideLooperType {\n  const ascItems = arrayKeys(slideSizesWithGaps)\n  const descItems = arrayKeys(slideSizesWithGaps).reverse()\n  const loopPoints = startPoints().concat(endPoints())\n\n  function removeSlideSizes(indexes: number[], from: number): number {\n    return indexes.reduce((a: number, i) => {\n      return a - slideSizesWithGaps[i]\n    }, from)\n  }\n\n  function slidesInGap(indexes: number[], gap: number): number[] {\n    return indexes.reduce((a: number[], i) => {\n      const remainingGap = removeSlideSizes(a, gap)\n      return remainingGap > 0 ? a.concat([i]) : a\n    }, [])\n  }\n\n  function findLoopPoints(\n    indexes: number[],\n    edge: LoopEdgeType,\n  ): LoopPointType[] {\n    const isStartEdge = edge === 'start'\n    const offset = isStartEdge ? -contentSize : contentSize\n    const slideBounds = slidesInView.findSlideBounds(offset)\n\n    return indexes.map((index) => {\n      const initial = isStartEdge ? 0 : -contentSize\n      const altered = isStartEdge ? contentSize : 0\n      const bounds = slideBounds.filter((b) => b.index === index)[0]\n      const point = bounds[isStartEdge ? 'end' : 'start']\n      const getTarget = (): number =>\n        scrollLocation.get() > point ? initial : altered\n      return { point, getTarget, index, location: -1 }\n    })\n  }\n\n  function startPoints(): LoopPointType[] {\n    const gap = scrollSnaps[0] - 1\n    const indexes = slidesInGap(descItems, gap)\n    return findLoopPoints(indexes, 'end')\n  }\n\n  function endPoints(): LoopPointType[] {\n    const gap = viewSize - scrollSnaps[0] - 1\n    const indexes = slidesInGap(ascItems, gap)\n    return findLoopPoints(indexes, 'start')\n  }\n\n  function canLoop(): boolean {\n    return loopPoints.every(({ index }) => {\n      const otherIndexes = ascItems.filter((i) => i !== index)\n      return removeSlideSizes(otherIndexes, viewSize) <= 0\n    })\n  }\n\n  function loop(slides: HTMLElement[]): void {\n    loopPoints.forEach((loopPoint) => {\n      const { getTarget, location, index } = loopPoint\n      const target = getTarget()\n      if (target !== location) {\n        slides[index].style[axis.startEdge] = `${target}%`\n        loopPoint.location = target\n      }\n    })\n  }\n\n  function clear(slides: HTMLElement[]): void {\n    loopPoints.forEach(({ index }) => {\n      slides[index].style[axis.startEdge] = ''\n    })\n  }\n\n  const self: SlideLooperType = {\n    canLoop,\n    clear,\n    loop,\n    loopPoints,\n  }\n  return self\n}\n","import { EventStore, EventStoreType } from './eventStore'\nimport { ScrollToType } from './scrollTo'\n\nexport type SlideFocusType = {\n  addActivationEvents: (slides: HTMLElement[]) => void\n  removeAllEvents: EventStoreType['removeAll']\n}\n\nexport function SlideFocus(\n  rootNode: HTMLElement,\n  scrollTo: ScrollToType,\n  slidesToScroll: number,\n): SlideFocusType {\n  const eventStore = EventStore()\n  const removeAllEvents = eventStore.removeAll\n  let lastTabPressTime = 0\n\n  function registerTabPress(event: Event): void {\n    if ((event as KeyboardEvent).keyCode !== 9) return\n    lastTabPressTime = new Date().getTime()\n  }\n\n  function addFocusEvent(slide: HTMLElement, index: number): void {\n    const focus = (): void => {\n      const nowTime = new Date().getTime()\n      const diffTime = nowTime - lastTabPressTime\n      if (diffTime > 10) return\n\n      rootNode.scrollLeft = 0\n      const selectedIndex = Math.floor(index / slidesToScroll)\n      scrollTo.index(selectedIndex, 0)\n    }\n    eventStore.add(slide, 'focus', focus, true)\n  }\n\n  function addActivationEvents(slides: HTMLElement[]): void {\n    eventStore.add(document, 'keydown', registerTabPress, false)\n    slides.forEach(addFocusEvent)\n  }\n\n  const self: SlideFocusType = {\n    addActivationEvents,\n    removeAllEvents,\n  }\n  return self\n}\n","import { AxisType } from './axis'\nimport { DirectionType } from './direction'\nimport { Vector1DType } from './vector1d'\n\nexport type TranslateType = {\n  clear: () => void\n  to: (vector: Vector1DType) => void\n  toggleActive: (active: boolean) => void\n}\n\nexport function Translate(\n  axis: AxisType,\n  direction: DirectionType,\n  container: HTMLElement,\n): TranslateType {\n  const containerStyle = container.style\n  const translate = axis.scroll === 'x' ? x : y\n  let disabled = false\n\n  function x(n: number): string {\n    return `translate3d(${n}%,0px,0px)`\n  }\n\n  function y(n: number): string {\n    return `translate3d(0px,${n}%,0px)`\n  }\n\n  function to(target: Vector1DType): void {\n    if (disabled) return\n    containerStyle.transform = translate(direction.applyTo(target.get()))\n  }\n\n  function toggleActive(active: boolean): void {\n    disabled = !active\n  }\n\n  function clear(): void {\n    containerStyle.transform = ''\n  }\n\n  const self: TranslateType = {\n    clear,\n    to,\n    toggleActive,\n  }\n  return self\n}\n","import { Alignment } from './alignment'\nimport { Animation, AnimationType } from './animation'\nimport { Axis, AxisType } from './axis'\nimport { Counter, CounterType } from './counter'\nimport { Direction, DirectionType } from './direction'\nimport { DragHandler, DragHandlerType } from './dragHandler'\nimport { DragTracker } from './dragTracker'\nimport { EventEmitterType } from './eventEmitter'\nimport { Limit, LimitType } from './limit'\nimport { OptionsType } from './options'\nimport { PxToPercent, PxToPercentType } from './pxToPercent'\nimport { ScrollBody, ScrollBodyType } from './scrollBody'\nimport { ScrollBounds, ScrollBoundsType } from './scrollBounds'\nimport { ScrollContain } from './scrollContain'\nimport { ScrollLimit } from './scrollLimit'\nimport { ScrollLooper, ScrollLooperType } from './scrollLooper'\nimport { ScrollProgress, ScrollProgressType } from './scrollProgress'\nimport { ScrollSnap } from './scrollSnap'\nimport { ScrollTarget, ScrollTargetType } from './scrollTarget'\nimport { ScrollTo, ScrollToType } from './scrollTo'\nimport { SlideLooper, SlideLooperType } from './slideLooper'\nimport { SlideFocus, SlideFocusType } from './slideFocus'\nimport { SlidesInView, SlidesInViewType } from './slidesInView'\nimport { SlideSizes } from './slideSizes'\nimport { Translate, TranslateType } from './translate'\nimport { arrayKeys, arrayLast, lastIndex } from './utils'\nimport { Vector1D, Vector1DType } from './vector1d'\n\nexport type Engine = {\n  axis: AxisType\n  direction: DirectionType\n  animation: AnimationType\n  scrollBounds: ScrollBoundsType\n  scrollLooper: ScrollLooperType\n  scrollProgress: ScrollProgressType\n  index: CounterType\n  indexPrevious: CounterType\n  limit: LimitType\n  location: Vector1DType\n  options: OptionsType\n  pxToPercent: PxToPercentType\n  scrollBody: ScrollBodyType\n  dragHandler: DragHandlerType\n  slideFocus: SlideFocusType\n  slideLooper: SlideLooperType\n  slidesInView: SlidesInViewType\n  target: Vector1DType\n  translate: TranslateType\n  scrollTo: ScrollToType\n  scrollTarget: ScrollTargetType\n  scrollSnaps: number[]\n  slideIndexes: number[]\n}\n\nexport function Engine(\n  root: HTMLElement,\n  container: HTMLElement,\n  slides: HTMLElement[],\n  options: OptionsType,\n  events: EventEmitterType,\n): Engine {\n  // Options\n  const {\n    align,\n    axis: scrollAxis,\n    direction: contentDirection,\n    startIndex,\n    inViewThreshold,\n    loop,\n    speed,\n    dragFree,\n    slidesToScroll,\n    containScroll,\n  } = options\n\n  // Measurements\n  const containerRect = container.getBoundingClientRect()\n  const slideRects = slides.map((slide) => slide.getBoundingClientRect())\n  const direction = Direction(contentDirection)\n  const axis = Axis(scrollAxis, contentDirection)\n  const pxToPercent = PxToPercent(axis.measureSize(containerRect))\n  const viewSize = pxToPercent.totalPercent\n  const alignment = Alignment(align, viewSize)\n  const { slideSizes, slideSizesWithGaps } = SlideSizes(\n    axis,\n    pxToPercent,\n    slides,\n    slideRects,\n    loop,\n  )\n  const { snaps, snapsAligned } = ScrollSnap(\n    axis,\n    alignment,\n    pxToPercent,\n    containerRect,\n    slideRects,\n    slidesToScroll,\n  )\n  const contentSize = arrayLast(snaps) * -1 + arrayLast(slideSizesWithGaps)\n  const { snapsContained } = ScrollContain(\n    viewSize,\n    contentSize,\n    snaps,\n    snapsAligned,\n    containScroll,\n  )\n\n  const contain = !loop && containScroll !== ''\n  const scrollSnaps = contain ? snapsContained : snapsAligned\n  const { limit } = ScrollLimit(contentSize, scrollSnaps, loop)\n\n  // Indexes\n  const index = Counter(Limit(0, lastIndex(scrollSnaps)), loop, startIndex)\n  const indexPrevious = index.clone()\n  const slideIndexes = arrayKeys(slides)\n\n  // Draw\n  const update = (): void => {\n    if (!loop) {\n      engine.scrollBounds.constrain(target, engine.dragHandler.pointerDown())\n    }\n    engine.scrollBody.seek(target).update()\n    const settled = engine.scrollBody.settle(target)\n\n    if (settled && !engine.dragHandler.pointerDown()) {\n      engine.animation.stop()\n      events.emit('settle')\n    }\n    if (!settled) {\n      events.emit('scroll')\n    }\n    if (loop) {\n      engine.scrollLooper.loop(loopVectors, engine.scrollBody.direction())\n      engine.slideLooper.loop(slides)\n    }\n\n    engine.translate.to(location)\n    engine.animation.proceed()\n  }\n\n  // Shared\n  const animation = Animation(update)\n  const startLocation = scrollSnaps[index.get()]\n  const location = Vector1D(startLocation)\n  const target = Vector1D(startLocation)\n  const loopVectors = [location, target]\n  const scrollBody = ScrollBody(location, speed, 1)\n  const scrollTarget = ScrollTarget(\n    index,\n    loop,\n    scrollSnaps,\n    contentSize,\n    limit,\n    target,\n  )\n  const scrollTo = ScrollTo(\n    animation,\n    index,\n    indexPrevious,\n    scrollTarget,\n    target,\n    events,\n  )\n  const slidesInView = SlidesInView(\n    viewSize,\n    contentSize,\n    slideSizes,\n    snaps,\n    loop,\n    inViewThreshold,\n  )\n\n  // DragHandler\n  const dragHandler = DragHandler(\n    axis,\n    direction,\n    root,\n    target,\n    dragFree,\n    DragTracker(axis, pxToPercent),\n    location,\n    animation,\n    scrollTo,\n    scrollBody,\n    scrollTarget,\n    index,\n    limit,\n    events,\n  )\n\n  // Slider\n  const engine: Engine = {\n    animation,\n    axis,\n    direction,\n    dragHandler,\n    pxToPercent,\n    index,\n    indexPrevious,\n    limit,\n    location,\n    options,\n    scrollBody,\n    scrollBounds: ScrollBounds(limit, location, scrollBody),\n    scrollLooper: ScrollLooper(contentSize, pxToPercent, limit, location),\n    scrollProgress: ScrollProgress(limit),\n    scrollSnaps,\n    scrollTarget,\n    scrollTo,\n    slideFocus: SlideFocus(root, scrollTo, slidesToScroll),\n    slideLooper: SlideLooper(\n      axis,\n      viewSize,\n      contentSize,\n      slideSizesWithGaps,\n      scrollSnaps,\n      slidesInView,\n      location,\n    ),\n    slidesInView,\n    slideIndexes,\n    target,\n    translate: Translate(axis, direction, container),\n  }\n  return engine\n}\n","export type PxToPercentType = {\n  measure: (n: number) => number\n  totalPercent: number\n}\n\nexport function PxToPercent(viewInPx: number): PxToPercentType {\n  const totalPercent = 100\n\n  function measure(n: number): number {\n    if (viewInPx === 0) return 0\n    return (n / viewInPx) * totalPercent\n  }\n\n  const self: PxToPercentType = {\n    measure,\n    totalPercent,\n  }\n  return self\n}\n","export type DirectionOptionType = 'ltr' | 'rtl'\n\nexport type DirectionType = {\n  applyTo: (n: number) => number\n}\n\nexport function Direction(direction: DirectionOptionType): DirectionType {\n  const sign = direction === 'rtl' ? -1 : 1\n\n  function applyTo(n: number): number {\n    return n * sign\n  }\n\n  const self: DirectionType = {\n    applyTo,\n  }\n  return self\n}\n","import { DirectionOptionType } from './direction'\n\nexport type AxisOptionType = 'x' | 'y'\ntype AxisEdgeType = 'top' | 'right' | 'bottom' | 'left'\n\nexport type AxisType = {\n  scroll: AxisOptionType\n  cross: AxisOptionType\n  startEdge: AxisEdgeType\n  endEdge: AxisEdgeType\n  measureSize: (rect: DOMRect) => number\n}\n\nexport function Axis(\n  axis: AxisOptionType,\n  contentDirection: DirectionOptionType,\n): AxisType {\n  const scroll = axis === 'y' ? 'y' : 'x'\n  const cross = axis === 'y' ? 'x' : 'y'\n  const startEdge = getStartEdge()\n  const endEdge = getEndEdge()\n\n  function measureSize(rect: DOMRect): number {\n    const { width, height } = rect\n    return scroll === 'x' ? width : height\n  }\n\n  function getStartEdge(): AxisEdgeType {\n    if (scroll === 'y') return 'top'\n    return contentDirection === 'rtl' ? 'right' : 'left'\n  }\n\n  function getEndEdge(): AxisEdgeType {\n    if (scroll === 'y') return 'bottom'\n    return contentDirection === 'rtl' ? 'left' : 'right'\n  }\n\n  const self: AxisType = {\n    scroll,\n    cross,\n    startEdge,\n    endEdge,\n    measureSize,\n  }\n  return self\n}\n","import { AxisType } from './axis'\nimport { PxToPercentType } from './pxToPercent'\nimport { arrayLast, lastIndex } from './utils'\n\nexport type SlideSizesType = {\n  slideSizes: number[]\n  slideSizesWithGaps: number[]\n}\n\nexport function SlideSizes(\n  axis: AxisType,\n  pxToPercent: PxToPercentType,\n  slides: HTMLElement[],\n  slideRects: DOMRect[],\n  loop: boolean,\n): SlideSizesType {\n  const { measureSize, startEdge, endEdge } = axis\n  const sizesInPx = slideRects.map(measureSize)\n  const slideSizes = sizesInPx.map(pxToPercent.measure)\n  const slideSizesWithGaps = measureWithGaps()\n\n  function measureWithGaps(): number[] {\n    return slideRects\n      .map((rect, index, rects) => {\n        const isLast = index === lastIndex(rects)\n        const style = window.getComputedStyle(arrayLast(slides))\n        const endGap = parseFloat(style.getPropertyValue(`margin-${endEdge}`))\n        if (isLast) return sizesInPx[index] + (loop ? endGap : 0)\n        return rects[index + 1][startEdge] - rect[startEdge]\n      })\n      .map(pxToPercent.measure)\n      .map(Math.abs)\n  }\n\n  const self: SlideSizesType = {\n    slideSizes,\n    slideSizesWithGaps,\n  }\n  return self\n}\n","import { Limit, LimitType } from './limit'\nimport { arrayLast } from './utils'\n\nexport type ScrollLimitType = {\n  limit: LimitType\n}\n\nexport function ScrollLimit(\n  contentSize: number,\n  scrollSnaps: number[],\n  loop: boolean,\n): ScrollLimitType {\n  const limit = measureLimit()\n\n  function measureLimit(): LimitType {\n    const startSnap = scrollSnaps[0]\n    const endSnap = arrayLast(scrollSnaps)\n    const min = loop ? startSnap - contentSize : endSnap\n    const max = startSnap\n    return Limit(min, max)\n  }\n\n  const self: ScrollLimitType = {\n    limit,\n  }\n  return self\n}\n","type CallbackType = () => void\n\nexport type AnimationType = {\n  start: () => void\n  stop: () => void\n  proceed: () => void\n}\n\nexport function Animation(callback: FrameRequestCallback): AnimationType {\n  let animationFrame = 0\n\n  function ifAnimating(active: boolean, cb: CallbackType): CallbackType {\n    return (): void => {\n      if (active === !!animationFrame) cb()\n    }\n  }\n\n  function start(): void {\n    animationFrame = window.requestAnimationFrame(callback)\n  }\n\n  function stop(): void {\n    window.cancelAnimationFrame(animationFrame)\n    animationFrame = 0\n  }\n\n  const self: AnimationType = {\n    proceed: ifAnimating(true, start),\n    start: ifAnimating(false, start),\n    stop: ifAnimating(true, stop),\n  }\n  return self\n}\n","import { AnimationType } from './animation'\nimport { CounterType } from './counter'\nimport { EventEmitterType } from './eventEmitter'\nimport { ScrollTargetType, TargetType } from './scrollTarget'\nimport { Vector1DType } from './vector1d'\n\nexport type ScrollToType = {\n  distance: (n: number, snap: boolean) => void\n  index: (n: number, direction: number) => void\n}\n\nexport function ScrollTo(\n  animation: AnimationType,\n  indexCurrent: CounterType,\n  indexPrevious: CounterType,\n  scrollTarget: ScrollTargetType,\n  targetVector: Vector1DType,\n  events: EventEmitterType,\n): ScrollToType {\n  function scrollTo(target: TargetType): void {\n    const distanceDiff = target.distance\n    const indexDiff = target.index !== indexCurrent.get()\n\n    if (distanceDiff) {\n      animation.start()\n      targetVector.add(distanceDiff)\n    }\n    if (indexDiff) {\n      indexPrevious.set(indexCurrent.get())\n      indexCurrent.set(target.index)\n      events.emit('select')\n    }\n  }\n\n  function distance(n: number, snap: boolean): void {\n    const target = scrollTarget.byDistance(n, snap)\n    scrollTo(target)\n  }\n\n  function index(n: number, direction: number): void {\n    const targetIndex = indexCurrent.clone().set(n)\n    const target = scrollTarget.byIndex(targetIndex.get(), direction)\n    scrollTo(target)\n  }\n\n  const self: ScrollToType = {\n    distance,\n    index,\n  }\n  return self\n}\n","type SlideBoundType = {\n  start: number\n  end: number\n  index: number\n}\n\nexport type SlidesInViewType = {\n  check: (location: number) => number[]\n  findSlideBounds: (offset: number, threshold?: number) => SlideBoundType[]\n}\n\nexport function SlidesInView(\n  viewSize: number,\n  contentSize: number,\n  slideSizes: number[],\n  snaps: number[],\n  loop: boolean,\n  inViewThreshold: number,\n): SlidesInViewType {\n  const threshold = Math.min(Math.max(inViewThreshold, 0.01), 0.99)\n  const offsets = loop ? [0, contentSize, -contentSize] : [0]\n  const slideBounds = offsets.reduce((a: SlideBoundType[], offset) => {\n    return a.concat(findSlideBounds(offset, threshold))\n  }, [])\n\n  function findSlideBounds(\n    offset: number,\n    threshold?: number,\n  ): SlideBoundType[] {\n    const thresholds = slideSizes.map((s) => s * (threshold || 0))\n    return snaps.map((snap, index) => ({\n      start: snap - slideSizes[index] + thresholds[index] + offset,\n      end: snap + viewSize - thresholds[index] + offset,\n      index,\n    }))\n  }\n\n  function check(location: number): number[] {\n    return slideBounds.reduce((list: number[], slideBound) => {\n      const { index, start, end } = slideBound\n      const inList = list.indexOf(index) !== -1\n      const inView = start < location && end > location\n      return !inList && inView ? list.concat([index]) : list\n    }, [])\n  }\n\n  const self: SlidesInViewType = {\n    check,\n    findSlideBounds,\n  }\n  return self\n}\n","import { AxisOptionType, AxisType } from './axis'\nimport { PxToPercentType } from './pxToPercent'\nimport { Vector1D, Vector1DType } from './vector1d'\n\nexport type DragTrackerType = {\n  pointerDown: (evt: Event) => number\n  pointerMove: (evt: Event) => number\n  pointerUp: () => number\n  readPoint: (evt: any, axis: AxisOptionType) => Vector1DType\n}\n\nexport function DragTracker(\n  axis: AxisType,\n  pxToPercent: PxToPercentType,\n): DragTrackerType {\n  const { scroll: scrollAxis } = axis\n  const coords = { x: 'clientX', y: 'clientY' }\n  const startDrag = Vector1D(0)\n  const diffDrag = Vector1D(0)\n  const lastDrag = Vector1D(0)\n  const pointValue = Vector1D(0)\n  const trackInterval = 10\n  const trackLength = 5\n  const trackTime = 100\n  let trackPoints: number[] = []\n  let lastMoveTime = new Date().getTime()\n  let isMouse = false\n\n  function readPoint(evt: any, type: AxisOptionType): Vector1DType {\n    isMouse = !evt.touches\n    const c = coords[type]\n    const value = isMouse ? evt[c] : evt.touches[0][c]\n    return pointValue.set(value)\n  }\n\n  function pointerDown(evt: Event): number {\n    const point = readPoint(evt, scrollAxis)\n    startDrag.set(point)\n    lastDrag.set(point)\n    return pxToPercent.measure(startDrag.get())\n  }\n\n  function pointerMove(evt: Event): number {\n    const point = readPoint(evt, scrollAxis)\n    const nowTime = new Date().getTime()\n    const diffTime = nowTime - lastMoveTime\n\n    if (diffTime >= trackInterval) {\n      if (diffTime >= trackTime) trackPoints = []\n      trackPoints.push(point.get())\n      lastMoveTime = nowTime\n    }\n\n    diffDrag.set(point).subtract(lastDrag)\n    lastDrag.set(point)\n    return pxToPercent.measure(diffDrag.get())\n  }\n\n  function pointerUp(): number {\n    const nowTime = new Date().getTime()\n    const diffTime = nowTime - lastMoveTime\n    const currentPoint = lastDrag.get()\n\n    const force = trackPoints\n      .slice(-trackLength)\n      .map((trackPoint) => currentPoint - trackPoint)\n      .sort((p1, p2) => (Math.abs(p1) < Math.abs(p2) ? 1 : -1))[0]\n\n    lastDrag.set(diffTime > trackTime || !force ? 0 : force)\n    trackPoints = []\n    return pxToPercent.measure(lastDrag.get())\n  }\n\n  const self: DragTrackerType = {\n    pointerDown,\n    pointerMove,\n    pointerUp,\n    readPoint,\n  }\n  return self\n}\n","import { AlignmentOptionType } from './alignment'\nimport { AxisOptionType } from './axis'\nimport { DirectionOptionType } from './direction'\nimport { ScrollContainOptionType } from './scrollContain'\n\nexport type OptionsType = {\n  align: AlignmentOptionType\n  axis: AxisOptionType\n  containScroll: ScrollContainOptionType\n  direction: DirectionOptionType\n  dragFree: boolean\n  draggable: boolean\n  draggableClass: string\n  draggingClass: string\n  inViewThreshold: number\n  loop: boolean\n  selectedClass: string\n  slidesToScroll: number\n  speed: number\n  startIndex: number\n}\n\nexport const defaultOptions: OptionsType = {\n  align: 'center',\n  axis: 'x',\n  containScroll: '',\n  direction: 'ltr',\n  dragFree: false,\n  draggable: true,\n  draggableClass: 'is-draggable',\n  draggingClass: 'is-dragging',\n  inViewThreshold: 0,\n  loop: false,\n  selectedClass: 'is-selected',\n  slidesToScroll: 1,\n  speed: 10,\n  startIndex: 0,\n}\n\nexport type EmblaOptionsType = Partial<OptionsType>\n","import { Engine } from './components/engine'\nimport { EventStore } from './components/eventStore'\nimport { defaultOptions, EmblaOptionsType } from './components/options'\nimport { OptionsPseudo, OptionsPseudoType } from './components/optionsPseudo'\nimport { addClass, debounce, removeClass } from './components/utils'\nimport {\n  EventEmitter,\n  EmblaEventType,\n  EventEmitterType,\n} from './components/eventEmitter'\n\nexport type EmblaCarouselType = {\n  canScrollNext: () => boolean\n  canScrollPrev: () => boolean\n  clickAllowed: () => boolean\n  containerNode: () => HTMLElement\n  dangerouslyGetEngine: () => Engine\n  destroy: () => void\n  off: EventEmitterType['off']\n  on: EventEmitterType['on']\n  previousScrollSnap: () => number\n  reInit: (options?: EmblaOptionsType) => void\n  rootNode: () => HTMLElement\n  scrollNext: () => void\n  scrollPrev: () => void\n  scrollProgress: () => number\n  scrollSnapList: () => number[]\n  scrollTo: (index: number) => void\n  selectedScrollSnap: () => number\n  slideNodes: () => HTMLElement[]\n  slidesInView: (target?: boolean) => number[]\n  slidesNotInView: (target?: boolean) => number[]\n}\n\nfunction EmblaCarousel(\n  sliderRoot: HTMLElement,\n  userOptions?: EmblaOptionsType,\n): EmblaCarouselType {\n  const events = EventEmitter()\n  const eventStore = EventStore()\n  const debouncedResize = debounce(resize, 500)\n  const reInit = reActivate\n  const { on, off } = events\n\n  let engine: Engine\n  let activated = false\n  let options = Object.assign({}, defaultOptions)\n  let optionsPseudo: OptionsPseudoType\n  let rootNodeSize = 0\n  let container: HTMLElement\n  let slides: HTMLElement[]\n\n  activate(userOptions)\n\n  function setupElements(): void {\n    if (!sliderRoot) throw new Error('Missing root node ðŸ˜¢')\n\n    const sliderContainer = sliderRoot.querySelector('*')\n    if (!sliderContainer) throw new Error('Missing container node ðŸ˜¢')\n\n    container = sliderContainer as HTMLElement\n    slides = Array.prototype.slice.call(container.children)\n    optionsPseudo = OptionsPseudo(sliderRoot)\n  }\n\n  function activate(partialOptions?: EmblaOptionsType): void {\n    setupElements()\n    options = Object.assign(options, partialOptions, optionsPseudo.get())\n    engine = Engine(sliderRoot, container, slides, options, events)\n    eventStore.add(window, 'resize', debouncedResize)\n    engine.translate.to(engine.location)\n    rootNodeSize = engine.axis.measureSize(sliderRoot.getBoundingClientRect())\n\n    if (options.loop) {\n      if (!engine.slideLooper.canLoop()) {\n        deActivate()\n        return activate({ loop: false })\n      }\n      engine.slideLooper.loop(slides)\n    }\n    if (options.draggable && container.offsetParent && slides.length) {\n      engine.dragHandler.addActivationEvents()\n      if (options.draggableClass) {\n        addClass(sliderRoot, options.draggableClass)\n      }\n      if (options.draggingClass) {\n        events\n          .on('pointerDown', toggleDraggingClass)\n          .on('pointerUp', toggleDraggingClass)\n      }\n    }\n    if (slides.length) {\n      engine.slideFocus.addActivationEvents(slides)\n    }\n    if (options.selectedClass) {\n      toggleSelectedClass()\n      events\n        .on('select', toggleSelectedClass)\n        .on('pointerUp', toggleSelectedClass)\n    }\n    if (!activated) {\n      setTimeout(() => events.emit('init'), 0)\n      activated = true\n    }\n  }\n\n  function toggleDraggingClass(evt: EmblaEventType): void {\n    const { draggingClass } = options\n    if (evt === 'pointerDown') addClass(sliderRoot, draggingClass)\n    else removeClass(sliderRoot, draggingClass)\n  }\n\n  function toggleSelectedClass(): void {\n    const { selectedClass } = options\n    const inView = slidesInView(true)\n    const notInView = slidesNotInView(true)\n    notInView.forEach((index) => removeClass(slides[index], selectedClass))\n    inView.forEach((index) => addClass(slides[index], selectedClass))\n  }\n\n  function deActivate(): void {\n    engine.dragHandler.removeAllEvents()\n    engine.slideFocus.removeAllEvents()\n    engine.animation.stop()\n    eventStore.removeAll()\n    engine.translate.clear()\n    engine.slideLooper.clear(slides)\n    removeClass(sliderRoot, options.draggableClass)\n    slides.forEach((slide) => removeClass(slide, options.selectedClass))\n    events.off('select', toggleSelectedClass)\n    events.off('pointerUp', toggleSelectedClass)\n    events.off('pointerDown', toggleDraggingClass)\n    events.off('pointerUp', toggleDraggingClass)\n  }\n\n  function reActivate(partialOptions?: EmblaOptionsType): void {\n    if (!activated) return\n    const startIndex = selectedScrollSnap()\n    const newOptions = Object.assign({ startIndex }, partialOptions)\n    deActivate()\n    activate(newOptions)\n    events.emit('reInit')\n  }\n\n  function destroy(): void {\n    if (!activated) return\n    deActivate()\n    activated = false\n    events.emit('destroy')\n  }\n\n  function resize(): void {\n    if (!activated) return\n    const size = engine.axis.measureSize(sliderRoot.getBoundingClientRect())\n    if (rootNodeSize !== size) reActivate()\n    events.emit('resize')\n  }\n\n  function slidesInView(target?: boolean): number[] {\n    const location = engine[target ? 'target' : 'location'].get()\n    const type = options.loop ? 'removeOffset' : 'constrain'\n    return engine.slidesInView.check(engine.limit[type](location))\n  }\n\n  function slidesNotInView(target?: boolean): number[] {\n    const inView = slidesInView(target)\n    return engine.slideIndexes.filter((index) => inView.indexOf(index) === -1)\n  }\n\n  function scrollTo(index: number, direction?: number): void {\n    engine.scrollBody.useBaseMass().useBaseSpeed()\n    if (activated) engine.scrollTo.index(index, direction || 0)\n  }\n\n  function scrollNext(): void {\n    const next = engine.index.clone().add(1)\n    scrollTo(next.get(), -1)\n  }\n\n  function scrollPrev(): void {\n    const prev = engine.index.clone().add(-1)\n    scrollTo(prev.get(), 1)\n  }\n\n  function canScrollNext(): boolean {\n    const next = engine.index.clone().add(1)\n    return next.get() !== selectedScrollSnap()\n  }\n\n  function canScrollPrev(): boolean {\n    const prev = engine.index.clone().add(-1)\n    return prev.get() !== selectedScrollSnap()\n  }\n\n  function scrollSnapList(): number[] {\n    return engine.scrollSnaps.map(engine.scrollProgress.get)\n  }\n\n  function scrollProgress(): number {\n    return engine.scrollProgress.get(engine.location.get())\n  }\n\n  function selectedScrollSnap(): number {\n    return engine.index.get()\n  }\n\n  function previousScrollSnap(): number {\n    return engine.indexPrevious.get()\n  }\n\n  function clickAllowed(): boolean {\n    return engine.dragHandler.clickAllowed()\n  }\n\n  function dangerouslyGetEngine(): Engine {\n    return engine\n  }\n\n  function rootNode(): HTMLElement {\n    return sliderRoot\n  }\n\n  function containerNode(): HTMLElement {\n    return container\n  }\n\n  function slideNodes(): HTMLElement[] {\n    return slides\n  }\n\n  const self: EmblaCarouselType = {\n    canScrollNext,\n    canScrollPrev,\n    clickAllowed,\n    containerNode,\n    dangerouslyGetEngine,\n    destroy,\n    off,\n    on,\n    previousScrollSnap,\n    reInit,\n    rootNode,\n    scrollNext,\n    scrollPrev,\n    scrollProgress,\n    scrollSnapList,\n    scrollTo,\n    selectedScrollSnap,\n    slideNodes,\n    slidesInView,\n    slidesNotInView,\n  }\n  return self\n}\n\nexport default EmblaCarousel\n","type CallbackType = (evt: EmblaEventType) => void\ntype ListenersType = Partial<{ [key in EmblaEventType]: CallbackType[] }>\n\nexport type EmblaEventType =\n  | 'init'\n  | 'pointerDown'\n  | 'pointerUp'\n  | 'scroll'\n  | 'select'\n  | 'settle'\n  | 'destroy'\n  | 'reInit'\n  | 'resize'\n\nexport type EventEmitterType = {\n  emit: (evt: EmblaEventType) => EventEmitterType\n  on: (evt: EmblaEventType, cb: CallbackType) => EventEmitterType\n  off: (evt: EmblaEventType, cb: CallbackType) => EventEmitterType\n}\n\nexport function EventEmitter(): EventEmitterType {\n  const listeners: ListenersType = {}\n\n  function getListeners(evt: EmblaEventType): CallbackType[] {\n    const eventListeners = listeners[evt]\n    return eventListeners || []\n  }\n\n  function emit(evt: EmblaEventType): EventEmitterType {\n    getListeners(evt).forEach((e) => e(evt))\n    return self\n  }\n\n  function on(evt: EmblaEventType, cb: CallbackType): EventEmitterType {\n    listeners[evt] = getListeners(evt).concat([cb])\n    return self\n  }\n\n  function off(evt: EmblaEventType, cb: CallbackType): EventEmitterType {\n    listeners[evt] = getListeners(evt).filter((e) => e !== cb)\n    return self\n  }\n\n  const self: EventEmitterType = {\n    emit,\n    off,\n    on,\n  }\n  return self\n}\n","import { EmblaOptionsType } from './options'\n\nexport type OptionsPseudoType = {\n  get: () => EmblaOptionsType\n}\n\nexport function OptionsPseudo(node: HTMLElement): OptionsPseudoType {\n  const psuedoString = window.getComputedStyle(node, ':before').content\n\n  function get(): EmblaOptionsType {\n    try {\n      return JSON.parse(psuedoString.slice(1, -1).replace(/\\\\/g, ''))\n    } catch (error) {} // eslint-disable-line no-empty\n    return {}\n  }\n\n  const self: OptionsPseudoType = {\n    get,\n  }\n  return self\n}\n","import { useRef, useEffect, useState, useMemo } from 'react'\nimport EmblaCarousel, { EmblaCarouselType } from '../vanilla'\nimport { EmblaOptionsType } from '../vanilla/components/options'\nimport { areEqualShallow, canUseDOM } from './utils'\n\ntype ViewportRefType = <ViewportElement extends HTMLElement>(\n  instance: ViewportElement | null,\n) => void\n\nexport type UseEmblaCarouselType = [\n  ViewportRefType,\n  EmblaCarouselType | undefined,\n]\n\nfunction useEmblaCarousel(\n  options: EmblaOptionsType = {},\n): UseEmblaCarouselType {\n  const [embla, setEmbla] = useState<EmblaCarouselType>()\n  const [viewport, setViewport] = useState<HTMLElement>()\n  const storedOptions = useRef<EmblaOptionsType>(options)\n  const activeOptions = useMemo<EmblaOptionsType>(() => {\n    if (!areEqualShallow(storedOptions.current, options)) {\n      storedOptions.current = options\n    }\n    return storedOptions.current\n  }, [storedOptions, options])\n\n  useEffect(() => {\n    if (canUseDOM() && viewport) {\n      const newEmbla = EmblaCarousel(viewport, activeOptions)\n      setEmbla(newEmbla)\n      return () => newEmbla.destroy()\n    } else {\n      setEmbla(undefined)\n    }\n  }, [viewport, activeOptions, setEmbla])\n\n  return [setViewport as ViewportRefType, embla]\n}\n\nexport { useEmblaCarousel }\n","export function canUseDOM(): boolean {\n  return !!(\n    typeof window !== 'undefined' &&\n    window.document &&\n    window.document.createElement\n  )\n}\n\nexport function areEqualShallow(\n  objectA: { [key: string]: any },\n  objectB: { [key: string]: any },\n): boolean {\n  return (\n    Object.keys(objectA).length === Object.keys(objectB).length &&\n    Object.keys(objectA).every((objectKey) => {\n      if (!Object.prototype.hasOwnProperty.call(objectB, objectKey)) {\n        return false\n      }\n      return objectA[objectKey] === objectB[objectKey]\n    })\n  )\n}\n"],"sourceRoot":""}